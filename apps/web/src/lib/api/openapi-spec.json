{"openapi":"3.0.0","paths":{"/api":{"get":{"description":"获取应用的基本信息","operationId":"AppController_root","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardResponseDto"}}}}},"summary":"获取应用信息","tags":["应用信息"]}},"/api/orgs":{"post":{"description":"创建一个新的组织（仅限管理员）","operationId":"OrganizationsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrganizationDto"}}}},"responses":{"200":{"description":"组织创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建组织","tags":["组织管理"]},"get":{"description":"获取组织列表，支持分页、搜索和筛选（仅限管理员）","operationId":"OrganizationsController_findAllOrganizations","parameters":[{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"isActive","required":false,"in":"query","description":"组织状态","schema":{"type":"boolean"}}],"responses":{"200":{"description":"获取组织列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"查询组织列表","tags":["组织管理"]}},"/api/orgs/members":{"get":{"description":"获取当前组织下的成员列表，支持分页、搜索、状态筛选与部门筛选（可选包含子部门）","operationId":"OrganizationsController_getOrganizationMembers","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"isActive","required":false,"in":"query","description":"是否按用户状态筛选","schema":{"type":"boolean"}},{"name":"search","required":false,"in":"query","description":"按姓名或邮箱搜索","schema":{"type":"string"}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID（可选）","schema":{"type":"string"}},{"name":"includeDescendants","required":false,"in":"query","description":"是否包含子孙部门（与部门筛选配合使用）","schema":{"type":"boolean"}}],"responses":{"200":{"description":"获取组织成员列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取组织成员列表","tags":["组织管理"]}},"/api/orgs/{id}":{"get":{"description":"根据组织ID获取组织详情（仅限管理员）","operationId":"OrganizationsController_findOrganization","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取组织详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取组织详情","tags":["组织管理"]},"patch":{"description":"更新组织信息（仅限管理员）","operationId":"OrganizationsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrganizationDto"}}}},"responses":{"200":{"description":"组织更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新组织","tags":["组织管理"]},"delete":{"description":"删除组织（仅限管理员）","operationId":"OrganizationsController_removeOrganization","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"组织删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"删除组织","tags":["组织管理"]}},"/api/users":{"post":{"description":"创建一个新的用户（仅限管理员）","operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"200":{"description":"用户创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建用户","tags":["用户管理"]},"get":{"description":"获取用户列表，支持分页、搜索和筛选（仅限管理员）","operationId":"UsersController_findAllUsers","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"orgId","required":false,"in":"query","description":"组织 ID","schema":{"type":"string"}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID","schema":{"type":"string"}},{"name":"name","required":false,"in":"query","description":"用户名搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"email","required":false,"in":"query","description":"邮箱搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"phone","required":false,"in":"query","description":"手机号搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"isActive","required":false,"in":"query","description":"用户状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeDescendants","required":false,"in":"query","description":"是否包含子孙部门的用户","schema":{"type":"boolean"}}],"responses":{"200":{"description":"获取用户列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"查询用户列表","tags":["用户管理"]}},"/api/users/{id}":{"get":{"description":"根据用户ID获取用户详情","operationId":"UsersController_findUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取用户详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取用户详情","tags":["用户管理"]},"patch":{"description":"更新用户信息","operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"用户更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新用户","tags":["用户管理"]},"delete":{"description":"删除用户","operationId":"UsersController_removeUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"用户删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteUserApiResponseDto"}}}},"40100":{"description":"不能删除自己的账户","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":40100},"message":{"type":"string","example":"不能删除自己的账户"}}}}}}},"security":[{"jwt":[]}],"summary":"删除用户","tags":["用户管理"]}},"/api/users/{id}/avatar":{"patch":{"description":"更新用户头像","operationId":"UsersController_updateAvatar","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"选择要上传的头像文件（字段名：file）","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"用户头像更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新用户头像","tags":["用户管理"]}},"/api/users/export":{"get":{"operationId":"UsersController_exportUsers","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"orgId","required":false,"in":"query","description":"组织 ID","schema":{"type":"string"}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID","schema":{"type":"string"}},{"name":"name","required":false,"in":"query","description":"用户名搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"email","required":false,"in":"query","description":"邮箱搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"phone","required":false,"in":"query","description":"手机号搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"isActive","required":false,"in":"query","description":"用户状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeDescendants","required":false,"in":"query","description":"是否包含子孙部门的用户","schema":{"type":"boolean"}}],"responses":{"200":{"description":""}},"summary":"导出用户列表（Excel）","tags":["用户管理"]}},"/api/permissions":{"post":{"description":"创建新的权限项，仅超级管理员可操作","operationId":"PermissionsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePermissionDto"}}}},"responses":{"200":{"description":"权限创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建权限","tags":["权限管理"]},"get":{"description":"获取系统中所有可用权限","operationId":"PermissionsController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"resource","required":false,"in":"query","description":"资源名称搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"action","required":false,"in":"query","description":"操作类型搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"slug","required":false,"in":"query","description":"权限标识符搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"description","required":false,"in":"query","description":"描述搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"system","required":false,"in":"query","description":"是否为系统权限搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}}],"responses":{"200":{"description":"获取权限列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取权限列表","tags":["权限管理"]}},"/api/permissions/groups":{"get":{"description":"按资源分组获取权限目录，便于前端展示权限树","operationId":"PermissionsController_getPermissionGroups","parameters":[],"responses":{"200":{"description":"获取权限分组成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取权限分组","tags":["权限管理"]}},"/api/permissions/{id}":{"get":{"description":"获取指定权限的详细信息","operationId":"PermissionsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"获取权限详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取权限详情","tags":["权限管理"]},"delete":{"description":"删除指定权限，不能删除系统内置权限","operationId":"PermissionsController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"权限删除成功"}},"security":[{"jwt":[]}],"summary":"删除权限","tags":["权限管理"]}},"/api/uploads/single":{"post":{"description":"上传单个文件，支持图片、文档、音频、视频等格式","operationId":"UploadsController_uploadSingleFile","parameters":[],"requestBody":{"required":true,"description":"选择要上传的文件（字段名：file）","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"文件上传成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"单文件上传","tags":["文件上传"]}},"/api/uploads/multiple":{"post":{"description":"批量上传多个文件，最多支持10个文件同时上传，每个文件都会进行独立验证","operationId":"UploadsController_uploadMultipleFiles","parameters":[],"requestBody":{"required":true,"description":"选择要上传的文件列表（字段名：files）","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"files":{"type":"array","items":{"type":"string","format":"binary"},"maxItems":10}},"required":["files"]}}}},"responses":{"200":{"description":"文件上传成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleFileUploadApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"多文件上传","tags":["文件上传"]}},"/api/uploads/custom":{"post":{"description":"使用自定义验证规则上传文件，可以指定文件大小限制、允许的文件类型等参数","operationId":"UploadsController_uploadCustomFile","parameters":[],"requestBody":{"required":true,"description":"选择要上传的文件和自定义验证选项","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"},"maxSize":{"type":"number","description":"最大文件大小（字节）","example":10485760},"allowedTypes":{"type":"array","items":{"type":"string"},"description":"允许的MIME类型","example":["image/jpeg","image/png"]},"required":{"type":"boolean","description":"是否必需文件","example":true}},"required":["file"]}}}},"responses":{"200":{"description":"文件上传成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"自定义文件上传","tags":["文件上传"]}},"/api/uploads/stored/{id}":{"get":{"description":"根据文件ID获取已存储文件的详细信息，包括文件名、大小、类型和访问URL等","operationId":"UploadsController_getStoredFile","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取文件信息成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileInfoApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取文件信息","tags":["文件上传"]},"delete":{"description":"根据文件ID删除已存储的文件，同时清理本地文件系统中的文件","operationId":"UploadsController_deleteStoredFile","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"文件删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileDeleteApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"删除文件","tags":["文件上传"]}},"/api/uploads/stored":{"delete":{"description":"根据文件ID列表批量删除已存储的文件，返回删除成功和失败的文件统计","operationId":"UploadsController_deleteStoredFiles","parameters":[],"responses":{"200":{"description":"批量删除完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchFileDeleteApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"批量删除文件","tags":["文件上传"]}},"/api/uploads/download/{id}":{"get":{"description":"根据文件ID下载已存储的文件，返回文件流供客户端下载","operationId":"UploadsController_downloadFile","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"20305":{"description":"文件不存在","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":20305},"message":{"type":"string","example":"文件不存在"}}}}}},"30301":{"description":"文件系统错误","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":30301},"message":{"type":"string","example":"文件系统错误"}}}}}},"default":{"description":"文件下载成功，返回文件流","content":{"application/octet-stream":{"schema":{"type":"string","format":"binary"}}}}},"security":[{"jwt":[]}],"summary":"下载文件","tags":["文件上传"]}},"/api/departments":{"post":{"description":"创建一个新的部门（仅限管理员）","operationId":"DepartmentsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDepartmentDto"}}}},"responses":{"200":{"description":"部门创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建部门","tags":["部门管理"]},"get":{"description":"获取部门列表，支持分页、搜索和筛选（仅限管理员）","operationId":"DepartmentsController_findAllDepartments","parameters":[{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"isActive","required":false,"in":"query","description":"部门状态","schema":{"type":"boolean"}},{"name":"parentId","required":false,"in":"query","description":"上级部门 ID，空字符串表示获取顶级部门","schema":{"type":"string"}},{"name":"orgId","required":false,"in":"query","description":"组织 ID","schema":{"type":"string"}},{"name":"includeDescendants","required":false,"in":"query","description":"是否包含子孙部门，默认不包含","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"description":"获取部门列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"查询部门列表","tags":["部门管理"]}},"/api/departments/online-stats":{"get":{"description":"获取各部门的在线人数统计数据，包括部门名称、角色类型、在线人数和任务数量（仅限管理员）","operationId":"DepartmentsController_getDepartmentOnlineStats","parameters":[],"responses":{"200":{"description":"获取部门在线人数统计成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentOnlineStatsApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门在线人数统计","tags":["部门管理"]}},"/api/departments/{id}":{"get":{"description":"根据部门ID获取部门详情（仅限管理员）","operationId":"DepartmentsController_findDepartment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取部门详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门详情","tags":["部门管理"]},"patch":{"description":"更新部门信息（仅限管理员）","operationId":"DepartmentsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDepartmentDto"}}}},"responses":{"200":{"description":"部门更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新部门","tags":["部门管理"]},"delete":{"description":"删除部门（仅限管理员）","operationId":"DepartmentsController_removeDepartment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"部门删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"删除部门","tags":["部门管理"]}},"/api/departments/organizations/{orgId}/tree":{"get":{"description":"获取指定组织下的部门树形结构（仅限管理员）","operationId":"DepartmentsController_getDepartmentTree","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取部门树成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentTreeApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门树","tags":["部门管理"]}},"/api/departments/{departmentId}/members":{"get":{"description":"获取指定部门下的用户列表，支持包含子部门的查询、状态筛选和搜索功能（仅限管理员）","operationId":"DepartmentsController_getDepartmentMembers","parameters":[{"name":"departmentId","required":true,"in":"path","description":"部门 ID","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"includeChildren","required":false,"in":"query","description":"是否包含子部门的用户","schema":{"default":false,"type":"boolean"}},{"name":"isActive","required":false,"in":"query","description":"按用户状态筛选","schema":{"type":"boolean"}},{"name":"search","required":false,"in":"query","description":"按用户姓名或邮箱搜索","schema":{"type":"string"}}],"responses":{"200":{"description":"获取部门成员列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentMembersApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门成员列表","tags":["部门管理"]}},"/api/departments/{departmentId}/users":{"post":{"description":"在指定部门下创建一个新用户，组织信息由部门自动推导（仅限管理员）","operationId":"DepartmentsController_createUserInDepartment","parameters":[{"name":"departmentId","required":true,"in":"path","description":"部门 ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserInDepartmentDto"}}}},"responses":{"200":{"description":"用户创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"在部门下创建用户","tags":["部门管理"]}},"/api/auth/register":{"post":{"description":"注册新用户账号","operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"200":{"description":"注册成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterApiResponseDto"}}}}},"summary":"用户注册","tags":["认证管理"]}},"/api/auth/login":{"post":{"description":"用户登录获取访问令牌","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"登录成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginApiResponseDto"}}}}},"summary":"用户登录","tags":["认证管理"]}},"/api/auth/refresh-token":{"post":{"description":"使用刷新令牌获取新的访问令牌","operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"令牌刷新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenApiResponseDto"}}}}},"summary":"刷新访问令牌","tags":["认证管理"]}},"/api/auth/request-password-reset":{"post":{"description":"发送密码重置邮件","operationId":"AuthController_requestPasswordReset","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestPasswordResetDto"}}}},"responses":{"200":{"description":"密码重置邮件发送成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequestApiResponseDto"}}}}},"summary":"请求密码重置","tags":["认证管理"]}},"/api/auth/reset-password":{"post":{"description":"使用令牌重置密码","operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"密码重置成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetSuccessApiResponseDto"}}}}},"summary":"重置密码","tags":["认证管理"]}},"/api/auth/profile":{"get":{"description":"获取当前登录用户的个人资料","operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"获取用户资料成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取用户资料","tags":["认证管理"]},"patch":{"description":"更新当前登录用户的个人资料，包括姓名、邮箱、手机号、头像等信息","operationId":"AuthController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"用户资料更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新用户资料","tags":["认证管理"]}},"/api/auth/change-password":{"patch":{"description":"通过验证当前密码来修改新密码","operationId":"AuthController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"密码修改成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"修改密码","tags":["认证管理"]}},"/api/auth/verify-token":{"post":{"description":"验证当前访问令牌是否有效","operationId":"AuthController_verifyToken","parameters":[],"responses":{"200":{"description":"令牌验证成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenVerifyApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"验证令牌","tags":["认证管理"]}},"/api/auth/logout":{"post":{"description":"清除认证状态和Cookie","operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"登出成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"用户登出","tags":["认证管理"]}},"/api/roles":{"post":{"description":"在当前用户所属组织中创建新角色","operationId":"RolesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleDto"}}}},"responses":{"200":{"description":"角色创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建角色","tags":["角色管理"]},"get":{"description":"获取当前组织的角色列表，包含系统内置角色","operationId":"RolesController_findAll","parameters":[{"name":"includeSystem","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"获取角色列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取角色列表","tags":["角色管理"]}},"/api/roles/{id}":{"get":{"description":"获取指定角色的详细信息，包含权限列表","operationId":"RolesController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"获取角色详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取角色详情","tags":["角色管理"]},"patch":{"description":"更新指定角色的信息，但不能更新系统内置角色","operationId":"RolesController_update","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleDto"}}}},"responses":{"200":{"description":"角色更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新角色","tags":["角色管理"]},"delete":{"description":"删除指定角色，不能删除系统内置角色或正在使用的角色","operationId":"RolesController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"角色删除成功"}},"security":[{"jwt":[]}],"summary":"删除角色","tags":["角色管理"]}},"/api/roles/{id}/permissions":{"get":{"description":"获取指定角色的权限列表","operationId":"RolesController_getRolePermissions","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"200":{"description":"获取角色权限成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取角色权限","tags":["角色管理"]}},"/api/roles/{id}/members":{"get":{"description":"获取指定角色下的成员用户列表，支持分页、搜索与状态筛选","operationId":"RolesController_getRoleMembers","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}},{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"orgId","required":false,"in":"query","description":"组织 ID","schema":{"type":"string"}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID","schema":{"type":"string"}},{"name":"name","required":false,"in":"query","description":"用户名搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"email","required":false,"in":"query","description":"邮箱搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"phone","required":false,"in":"query","description":"手机号搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"isActive","required":false,"in":"query","description":"用户状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeDescendants","required":false,"in":"query","description":"是否包含子孙部门的用户（需要提供 departmentId）","schema":{"type":"boolean"}}],"responses":{"200":{"description":"获取角色成员列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取角色成员列表","tags":["角色管理"]},"post":{"description":"添加指定角色下的成员用户","operationId":"RolesController_addRoleMembers","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRoleMembersDto"}}}},"responses":{"200":{"description":"添加角色成员成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"添加角色成员","tags":["角色管理"]},"delete":{"description":"移除指定角色下的成员用户","operationId":"RolesController_removeRoleMembers","parameters":[{"name":"id","required":true,"in":"path","description":"UUID","schema":{"format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRoleMembersDto"}}}},"responses":{"200":{"description":"移除角色成员成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"移除角色成员","tags":["角色管理"]}},"/api/license":{"post":{"description":"为指定邮箱创建并发送授权码（仅限管理员）","operationId":"LicenseController_createLicense","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLicenseDto"}}}},"responses":{"200":{"description":"授权码发放成功，邮件已发送","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLicenseApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建授权码","tags":["授权码管理"]},"get":{"description":"获取授权码列表，支持分页、搜索和高级筛选功能","operationId":"LicenseController_getLicenseList","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"email","required":false,"in":"query","description":"邮箱搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"code","required":false,"in":"query","description":"授权码搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"isUsed","required":false,"in":"query","description":"使用状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"locked","required":false,"in":"query","description":"锁定状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"isExpired","required":false,"in":"query","description":"过期状态搜索条件","schema":{"$ref":"#/components/schemas/AdvancedBooleanSearchOperators"}},{"name":"warningCount","required":false,"in":"query","description":"警告次数搜索条件","schema":{"$ref":"#/components/schemas/AdvancedNumberSearchOperators"}},{"name":"purchaseAmount","required":false,"in":"query","description":"购买金额搜索条件","schema":{"$ref":"#/components/schemas/AdvancedNumberSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"expiresAt","required":false,"in":"query","description":"过期时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"lastAccessTime","required":false,"in":"query","description":"最后访问时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"totalAccesses","required":false,"in":"query","description":"总访问次数搜索条件","schema":{"$ref":"#/components/schemas/AdvancedNumberSearchOperators"}},{"name":"riskLevel","required":false,"in":"query","description":"风险等级搜索条件","schema":{"$ref":"#/components/schemas/RiskLevelSearchOperators"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"accessCountFilter","required":false,"in":"query","description":"访问总数筛选","schema":{"$ref":"#/components/schemas/AggregateFilterDto"}},{"name":"ipCountFilter","required":false,"in":"query","description":"IP地址数量筛选","schema":{"$ref":"#/components/schemas/AggregateFilterDto"}},{"name":"riskyAccessFilter","required":false,"in":"query","description":"风险访问次数筛选","schema":{"$ref":"#/components/schemas/AggregateFilterDto"}},{"name":"recentAccessFilter","required":false,"in":"query","description":"最近访问时间筛选","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}}],"responses":{"200":{"description":"获取授权码列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseListApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取授权码列表","tags":["授权码管理"]}},"/api/license/{id}":{"get":{"description":"根据 ID 获取授权码的详细信息，包括统计数据（仅限管理员）","operationId":"LicenseController_getLicenseById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取授权码详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseDetailApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取单个授权码详情","tags":["授权码管理"]},"patch":{"description":"根据 ID 更新授权码的详细信息（仅限管理员）","operationId":"LicenseController_updateLicense","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLicenseDto"}}}},"responses":{"200":{"description":"授权码更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLicenseApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新授权码信息","tags":["授权码管理"]},"delete":{"description":"根据授权码 ID 删除授权码记录（仅限管理员）","operationId":"LicenseController_deleteLicense","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"授权码删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteLicenseApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"删除授权码","tags":["授权码管理"]}},"/api/license/check-license":{"post":{"description":"验证邮箱和授权码是否匹配，检查访问权限","operationId":"LicenseController_checkLicense","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckUserLicenseDto"}}}},"responses":{"200":{"description":"授权验证成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckLicenseApiResponseDto"}}}}},"summary":"授权验证","tags":["授权码管理"]}},"/api/license/log-access":{"post":{"description":"记录用户访问付费内容的详细日志","operationId":"LicenseController_logAccess","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogAccessDto"}}}},"responses":{"200":{"description":"访问日志记录成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogAccessApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"记录访问日志","tags":["授权码管理"]}},"/api/license/admin-check-license":{"post":{"description":"管理员测试授权码有效性，支持通过 ID 或邮箱+授权码查询，ID 优先级最高，不记录访问日志和风控检查（仅限管理员）","operationId":"LicenseController_adminCheckLicense","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckLicenseDto"}}}},"responses":{"200":{"description":"授权码测试完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCheckLicenseApiResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"管理员测试授权码","tags":["授权码管理"]}},"/api/license/toggle-lock":{"post":{"description":"切换授权码的锁定状态（仅限管理员）","operationId":"LicenseController_toggleLockLicense","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleLockLicenseDto"}}}},"responses":{"200":{"description":"授权码状态更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleLockResponseDataDto"}}}}},"security":[{"jwt":[]}],"summary":"锁定/解锁授权码","tags":["授权码管理"]}},"/api/license/send-expiration-reminders":{"post":{"description":"向即将过期的授权码用户发送提醒邮件（仅限管理员）","operationId":"LicenseController_sendExpirationReminders","parameters":[{"name":"days","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"发送完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendRemindersResponseDataDto"}}}}},"security":[{"jwt":[]}],"summary":"发送过期提醒","tags":["授权码管理"]}},"/api/statistics/dashboard/overview":{"get":{"description":"获取仪表盘概览统计信息，包括已有授权码用户总数、授权码总收入及其增长率","operationId":"StatisticsController_getDashboardOverview","parameters":[],"responses":{"200":{"description":"仪表盘概览统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardOverviewResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"仪表盘概览统计","tags":["统计信息"]}},"/api/statistics/users/overview":{"get":{"description":"获取用户总数、活跃用户数、新增用户数、用户增长趋势和状态分布等统计信息","operationId":"StatisticsController_getUserOverview","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"includeInactive","required":false,"in":"query","description":"是否包含非活跃用户","schema":{"example":true,"type":"boolean"}},{"name":"userStatus","required":false,"in":"query","description":"用户状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["active","inactive","all"]}}],"responses":{"200":{"description":"用户概览统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"用户概览统计","tags":["统计信息"]}},"/api/statistics/users/activity":{"get":{"description":"获取不同时间段的用户活跃度数据，包括日活、周活、月活等指标","operationId":"StatisticsController_getUserActivity","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"includeInactive","required":false,"in":"query","description":"是否包含非活跃用户","schema":{"example":true,"type":"boolean"}},{"name":"userStatus","required":false,"in":"query","description":"用户状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["active","inactive","all"]}}],"responses":{"200":{"description":"用户活跃度统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"用户活跃度统计","tags":["统计信息"]}},"/api/statistics/users/geo-distribution":{"get":{"description":"基于IP地址分析用户的地理位置分布情况","operationId":"StatisticsController_getUserGeoDistribution","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"includeInactive","required":false,"in":"query","description":"是否包含非活跃用户","schema":{"example":true,"type":"boolean"}},{"name":"userStatus","required":false,"in":"query","description":"用户状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["active","inactive","all"]}}],"responses":{"200":{"description":"用户地理分布获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"用户地理分布","tags":["统计信息"]}},"/api/statistics/licenses/overview":{"get":{"description":"获取授权码总数、使用情况、状态分布和生成趋势等统计信息","operationId":"StatisticsController_getLicenseOverview","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"licenseStatus","required":false,"in":"query","description":"授权码状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["used","unused","locked","expired","all"]}},{"name":"minAmount","required":false,"in":"query","description":"最小购买金额","schema":{"minimum":0,"example":0,"type":"number"}},{"name":"maxAmount","required":false,"in":"query","description":"最大购买金额","schema":{"minimum":0,"example":1000,"type":"number"}}],"responses":{"200":{"description":"授权码概览统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"授权码概览统计","tags":["统计信息"]}},"/api/statistics/licenses/usage":{"get":{"description":"分析授权码的使用率、过期情况和风控统计","operationId":"StatisticsController_getLicenseUsage","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"licenseStatus","required":false,"in":"query","description":"授权码状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["used","unused","locked","expired","all"]}},{"name":"minAmount","required":false,"in":"query","description":"最小购买金额","schema":{"minimum":0,"example":0,"type":"number"}},{"name":"maxAmount","required":false,"in":"query","description":"最大购买金额","schema":{"minimum":0,"example":1000,"type":"number"}}],"responses":{"200":{"description":"授权码使用分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"授权码使用分析","tags":["统计信息"]}},"/api/statistics/licenses/trend":{"get":{"description":"获取指定日期范围内每日新增授权码数量的趋势数据，便于前端生成折线图","operationId":"StatisticsController_getLicenseTrend","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"licenseStatus","required":false,"in":"query","description":"授权码状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["used","unused","locked","expired","all"]}},{"name":"minAmount","required":false,"in":"query","description":"最小购买金额","schema":{"minimum":0,"example":0,"type":"number"}},{"name":"maxAmount","required":false,"in":"query","description":"最大购买金额","schema":{"minimum":0,"example":1000,"type":"number"}}],"responses":{"200":{"description":"授权码趋势分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseTrendResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"授权码趋势分析","tags":["统计信息"]}},"/api/statistics/licenses/revenue":{"get":{"description":"获取总收入、收入趋势、平均客单价和收入分布等财务统计数据","operationId":"StatisticsController_getRevenue","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"currency","required":false,"in":"query","description":"货币单位","schema":{"default":"CNY","example":"CNY","type":"string","enum":["CNY","USD","EUR"]}},{"name":"includeRefunds","required":false,"in":"query","description":"是否包含退款","schema":{"default":false,"example":false,"type":"boolean"}}],"responses":{"200":{"description":"收入统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"收入统计","tags":["统计信息"]}},"/api/statistics/access/volume":{"get":{"description":"获取总访问量、访问趋势、高峰时段和访问频率分布等统计信息","operationId":"StatisticsController_getAccessVolume","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"onlyRisky","required":false,"in":"query","description":"是否仅统计风险访问","schema":{"default":false,"example":false,"type":"boolean"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址过滤","schema":{"example":"192.168.1.1","type":"string"}},{"name":"email","required":false,"in":"query","description":"邮箱过滤","schema":{"example":"user@example.com","type":"string"}}],"responses":{"200":{"description":"访问量统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"访问量统计","tags":["统计信息"]}},"/api/statistics/access/risk-analysis":{"get":{"description":"分析风险访问比例、风险类型分布、IP异常和风控效果评估","operationId":"StatisticsController_getRiskAnalysis","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"onlyRisky","required":false,"in":"query","description":"是否仅统计风险访问","schema":{"default":false,"example":false,"type":"boolean"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址过滤","schema":{"example":"192.168.1.1","type":"string"}},{"name":"email","required":false,"in":"query","description":"邮箱过滤","schema":{"example":"user@example.com","type":"string"}}],"responses":{"200":{"description":"风险访问分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskAnalysisResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"风险访问分析","tags":["统计信息"]}},"/api/statistics/access/device-network":{"get":{"description":"分析访问设备、网络提供商和访问模式等信息","operationId":"StatisticsController_getDeviceNetworkAnalysis","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"onlyRisky","required":false,"in":"query","description":"是否仅统计风险访问","schema":{"default":false,"example":false,"type":"boolean"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址过滤","schema":{"example":"192.168.1.1","type":"string"}},{"name":"email","required":false,"in":"query","description":"邮箱过滤","schema":{"example":"user@example.com","type":"string"}}],"responses":{"200":{"description":"设备和网络分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"设备和网络分析","tags":["统计信息"]}},"/api/statistics/business/conversion-funnel":{"get":{"description":"分析从邮箱验证到授权码使用的完整转化过程","operationId":"StatisticsController_getConversionFunnel","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"includeInactive","required":false,"in":"query","description":"是否包含非活跃用户","schema":{"example":true,"type":"boolean"}},{"name":"userStatus","required":false,"in":"query","description":"用户状态过滤","schema":{"default":"all","example":"all","type":"string","enum":["active","inactive","all"]}}],"responses":{"200":{"description":"转化漏斗分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionFunnelResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"转化漏斗分析","tags":["统计信息"]}},"/api/statistics/business/customer-value":{"get":{"description":"分析客户生命周期价值、客户分层和重复购买行为","operationId":"StatisticsController_getCustomerValue","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"currency","required":false,"in":"query","description":"货币单位","schema":{"default":"CNY","example":"CNY","type":"string","enum":["CNY","USD","EUR"]}},{"name":"includeRefunds","required":false,"in":"query","description":"是否包含退款","schema":{"default":false,"example":false,"type":"boolean"}}],"responses":{"200":{"description":"客户价值分析获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueStatisticsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"客户价值分析","tags":["统计信息"]}},"/api/statistics/business/performance":{"get":{"description":"获取系统健康度、服务可用性和数据库性能等技术指标","operationId":"StatisticsController_getPerformance","parameters":[],"responses":{"200":{"description":"产品性能指标获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealtimeMonitoringResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"产品性能指标","tags":["统计信息"]}},"/api/statistics/security/events":{"get":{"description":"统计异常访问事件、账户锁定和密码重置等安全相关事件","operationId":"StatisticsController_getSecurityEvents","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"onlyRisky","required":false,"in":"query","description":"是否仅统计风险访问","schema":{"default":false,"example":false,"type":"boolean"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址过滤","schema":{"example":"192.168.1.1","type":"string"}},{"name":"email","required":false,"in":"query","description":"邮箱过滤","schema":{"example":"user@example.com","type":"string"}}],"responses":{"200":{"description":"安全事件统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskAnalysisResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"安全事件统计","tags":["统计信息"]}},"/api/statistics/security/risk-control":{"get":{"description":"评估风控规则的触发率、误报率和优化建议","operationId":"StatisticsController_getRiskControl","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"period","required":false,"in":"query","description":"统计周期","schema":{"example":"day","type":"string","enum":["hour","day","week","month","quarter","year"]}},{"name":"limit","required":false,"in":"query","description":"页面大小","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"offset","required":false,"in":"query","description":"页面偏移","schema":{"minimum":0,"default":0,"example":0,"type":"number"}},{"name":"onlyRisky","required":false,"in":"query","description":"是否仅统计风险访问","schema":{"default":false,"example":false,"type":"boolean"}},{"name":"ipAddress","required":false,"in":"query","description":"IP地址过滤","schema":{"example":"192.168.1.1","type":"string"}},{"name":"email","required":false,"in":"query","description":"邮箱过滤","schema":{"example":"user@example.com","type":"string"}}],"responses":{"200":{"description":"风控效果评估获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskAnalysisResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"风控效果评估","tags":["统计信息"]}},"/api/statistics/realtime/dashboard":{"get":{"description":"获取实时在线用户数、访问量、收入和系统状态等实时数据","operationId":"StatisticsController_getRealtimeDashboard","parameters":[],"responses":{"200":{"description":"实时数据监控获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealtimeMonitoringResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"实时数据监控","tags":["统计信息"]}},"/api/statistics/realtime/alerts":{"get":{"description":"获取访问量突增、授权码异常锁定、系统性能异常等告警信息","operationId":"StatisticsController_getRealtimeAlerts","parameters":[],"responses":{"200":{"description":"异常告警数据获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealtimeMonitoringResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"异常告警数据","tags":["统计信息"]}},"/api/bug-reports":{"post":{"description":"用户提交新的漏洞报告，支持附件上传","operationId":"BugReportsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBugReportDto"}}}},"responses":{"200":{"description":"漏洞报告创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"创建漏洞报告","tags":["漏洞报告管理"]},"get":{"description":"分页查询漏洞报告，支持多种筛选条件和排序","operationId":"BugReportsController_findMany","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"title","required":false,"in":"query","description":"标题搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"severity","required":false,"in":"query","description":"漏洞等级搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"status","required":false,"in":"query","description":"状态搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"attackMethod","required":false,"in":"query","description":"攻击方式搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"description","required":false,"in":"query","description":"描述搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"reviewedAt","required":false,"in":"query","description":"审核时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeUser","required":false,"in":"query","description":"是否包含关联的用户信息","schema":{"example":true,"type":"boolean"}},{"name":"includeReviewer","required":false,"in":"query","description":"是否包含关联的审核人信息","schema":{"example":true,"type":"boolean"}},{"name":"includeOrganization","required":false,"in":"query","description":"是否包含关联的组织信息","schema":{"example":false,"type":"boolean"}}],"responses":{"200":{"description":"获取漏洞报告列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedBugReportsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取漏洞报告列表","tags":["漏洞报告管理"]}},"/api/bug-reports/my-reports":{"get":{"description":"获取当前用户提交的漏洞报告列表，支持分页、排序和筛选","operationId":"BugReportsController_findMyReports","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"title","required":false,"in":"query","description":"标题搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"severity","required":false,"in":"query","description":"漏洞等级搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"status","required":false,"in":"query","description":"状态搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"attackMethod","required":false,"in":"query","description":"攻击方式搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"description","required":false,"in":"query","description":"描述搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"reviewedAt","required":false,"in":"query","description":"审核时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeUser","required":false,"in":"query","description":"是否包含关联的用户信息","schema":{"example":true,"type":"boolean"}},{"name":"includeReviewer","required":false,"in":"query","description":"是否包含关联的审核人信息","schema":{"example":true,"type":"boolean"}},{"name":"includeOrganization","required":false,"in":"query","description":"是否包含关联的组织信息","schema":{"example":false,"type":"boolean"}}],"responses":{"200":{"description":"获取我的漏洞报告列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedBugReportsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取我的漏洞报告列表","tags":["漏洞报告管理"]}},"/api/bug-reports/department-reports":{"get":{"description":"获取当前用户所在部门的成员提交的漏洞报告列表，支持分页、排序和筛选","operationId":"BugReportsController_findDepartmentReports","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"search","required":false,"in":"query","description":"全局搜索关键词，在配置的全局搜索字段中进行模糊匹配","schema":{"type":"string"}},{"name":"searchMode","required":false,"in":"query","description":"搜索模式，决定如何处理搜索条件","schema":{"$ref":"#/components/schemas/SearchMode"}},{"name":"operator","required":false,"in":"query","description":"字段间的逻辑操作符，决定如何组合多个搜索条件","schema":{"$ref":"#/components/schemas/LogicalOperator"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段，支持单字段或多字段排序。单字段: 字符串；多字段: JSON 字符串数组","examples":{"single":{"summary":"单字段排序","value":"createdAt"},"multiple":{"summary":"多字段排序","value":"[{\"field\":\"name\",\"order\":\"asc\"},{\"field\":\"createdAt\",\"order\":\"desc\"}]"}},"schema":{"$ref":"#/components/schemas/Object"}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向，升序或降序（仅在 sortBy 为单字段字符串时使用）","schema":{"$ref":"#/components/schemas/SortOrder"}},{"name":"title","required":false,"in":"query","description":"标题搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"severity","required":false,"in":"query","description":"漏洞等级搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"status","required":false,"in":"query","description":"状态搜索条件","schema":{"$ref":"#/components/schemas/Object"}},{"name":"attackMethod","required":false,"in":"query","description":"攻击方式搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"description","required":false,"in":"query","description":"描述搜索条件","schema":{"$ref":"#/components/schemas/AdvancedStringSearchOperators"}},{"name":"createdAt","required":false,"in":"query","description":"创建时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"updatedAt","required":false,"in":"query","description":"更新时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"reviewedAt","required":false,"in":"query","description":"审核时间搜索条件","schema":{"$ref":"#/components/schemas/AdvancedDateSearchOperators"}},{"name":"includeUser","required":false,"in":"query","description":"是否包含关联的用户信息","schema":{"example":true,"type":"boolean"}},{"name":"includeReviewer","required":false,"in":"query","description":"是否包含关联的审核人信息","schema":{"example":true,"type":"boolean"}},{"name":"includeOrganization","required":false,"in":"query","description":"是否包含关联的组织信息","schema":{"example":false,"type":"boolean"}}],"responses":{"200":{"description":"获取部门成员报告列表成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedBugReportsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门成员报告列表","tags":["漏洞报告管理"]}},"/api/bug-reports/timeline":{"get":{"description":"获取漏洞报告的审理活动事件时间线数据列表，包括提交、审核、驳回等操作","operationId":"BugReportsController_getTimeline","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量，最大 100 条","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"eventType","required":false,"in":"query","description":"事件类型筛选","schema":{"type":"string","enum":["SUBMIT","APPROVE","REJECT","REQUEST_INFO","FORWARD","RESUBMIT","UPDATE"]}},{"name":"startDate","required":false,"in":"query","description":"开始时间筛选（ISO日期字符串）","schema":{"example":"2024-01-01T00:00:00Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束时间筛选（ISO日期字符串）","schema":{"example":"2024-12-31T23:59:59Z","type":"string"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（标题或内容）","schema":{"example":"SQL注入","type":"string"}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID 筛选","schema":{"type":"string"}},{"name":"includeSubDepartments","required":false,"in":"query","description":"是否包含子部门的数据","schema":{"default":false,"example":true,"type":"boolean"}}],"responses":{"200":{"description":"获取时间线成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimelineEventResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取报告审理活动时间线","tags":["漏洞报告管理"]}},"/api/bug-reports/drafts":{"post":{"description":"保存漏洞报告草稿，所有字段都是可选的","operationId":"BugReportsController_saveDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveDraftDto"}}}},"responses":{"200":{"description":"草稿保存成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"保存草稿","tags":["漏洞报告管理"]}},"/api/bug-reports/drafts/{id}":{"put":{"description":"更新草稿内容","operationId":"BugReportsController_updateDraft","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveDraftDto"}}}},"responses":{"200":{"description":"草稿更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新草稿","tags":["漏洞报告管理"]}},"/api/bug-reports/drafts/{id}/submit":{"put":{"description":"将草稿提交为正式报告","operationId":"BugReportsController_submitDraft","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitDraftDto"}}}},"responses":{"200":{"description":"草稿提交成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"提交草稿","tags":["漏洞报告管理"]}},"/api/bug-reports/{id}/resubmit":{"put":{"description":"重新提交被驳回的漏洞报告，可以修改内容后重新提交审核","operationId":"BugReportsController_resubmit","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResubmitBugReportDto"}}}},"responses":{"200":{"description":"漏洞报告重新提交成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"重新提交漏洞报告","tags":["漏洞报告管理"]}},"/api/bug-reports/{id}":{"delete":{"description":"删除漏洞报告，只能删除自己未被审核的报告","operationId":"BugReportsController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"漏洞报告删除成功"}},"security":[{"jwt":[]}],"summary":"删除漏洞报告","tags":["漏洞报告管理"]},"get":{"description":"根据ID获取漏洞报告的详细信息","operationId":"BugReportsController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"获取漏洞报告详情成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取漏洞报告详情","tags":["漏洞报告管理"]},"put":{"description":"更新漏洞报告的内容，只能更新自己未被审核的报告","operationId":"BugReportsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBugReportDto"}}}},"responses":{"200":{"description":"漏洞报告更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"更新漏洞报告","tags":["漏洞报告管理"]}},"/api/bug-reports/{id}/process":{"post":{"description":"对漏洞报告进行审批处理，支持通过、驳回、要求补充信息、转发等操作","operationId":"BugReportsController_processApproval","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessApprovalDto"}}}},"responses":{"200":{"description":"审批处理成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BugReportResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"处理审批","tags":["漏洞报告管理"]}},"/api/bug-reports/{id}/approval-history":{"get":{"description":"获取漏洞报告的审批历史记录","operationId":"BugReportsController_getApprovalHistory","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"includeApprover","required":false,"in":"query","description":"是否包含审批人详细信息","schema":{"default":true,"type":"boolean"}},{"name":"includeTargetUser","required":false,"in":"query","description":"是否包含转发目标用户信息","schema":{"default":true,"type":"boolean"}},{"name":"includeSubmissions","required":false,"in":"query","description":"是否包含提交记录","schema":{"default":true,"type":"boolean"}}],"responses":{"200":{"description":"获取审批历史成功","content":{"application/json":{"schema":{"type":"array"}}}}},"security":[{"jwt":[]}],"summary":"获取审批历史","tags":["漏洞报告管理"]}},"/api/bug-reports/department-stats":{"get":{"description":"根据组织获取该组织下各部门成员提交的漏洞报告统计数据，用于图表展示","operationId":"BugReportsController_getDepartmentReportsStats","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期（ISO 8601格式）","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期（ISO 8601格式）","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"status","required":false,"in":"query","description":"报告状态过滤","schema":{"example":"APPROVED","type":"string"}}],"responses":{"200":{"description":"获取部门报告统计成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentReportsStatsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取部门报告统计","tags":["漏洞报告管理"]}},"/api/bug-reports/approval-status-stats":{"get":{"description":"获取组织内各审批状态的漏洞报告统计数据，包括各状态数量和占比","operationId":"BugReportsController_getApprovalStatusStats","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期（ISO 8601格式）","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期（ISO 8601格式）","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}},{"name":"severity","required":false,"in":"query","description":"漏洞等级过滤","schema":{"example":"HIGH","type":"string","enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"]}},{"name":"departmentId","required":false,"in":"query","description":"部门 ID 筛选","schema":{"type":"string"}},{"name":"includeSubDepartments","required":false,"in":"query","description":"是否包含子部门的数据","schema":{"default":false,"example":true,"type":"boolean"}}],"responses":{"200":{"description":"获取审批状态统计成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalStatusStatsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取审批状态统计","tags":["漏洞报告管理"]}},"/api/bug-reports/daily-stats":{"get":{"description":"获取组织内每日提交和审核的漏洞报告统计数据，支持时间范围筛选，默认统计最近30天","operationId":"BugReportsController_getDailyReportsStats","parameters":[{"name":"startDate","required":false,"in":"query","description":"开始日期（ISO 8601格式），默认为30天前","schema":{"example":"2024-01-01T00:00:00.000Z","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"结束日期（ISO 8601格式），默认为当前日期","schema":{"example":"2024-12-31T23:59:59.999Z","type":"string"}}],"responses":{"200":{"description":"获取每日报告统计成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportsStatsResponseDto"}}}}},"security":[{"jwt":[]}],"summary":"获取每日报告统计","tags":["漏洞报告管理"]}},"/api/bug-reports/{id}/export":{"get":{"description":"导出单个漏洞报告的完整信息为JSON格式，包含报告详情、附件和审批历史","operationId":"BugReportsController_exportBugReport","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"includeAttachmentContent","required":false,"in":"query","description":"是否包含附件内容（base64编码）","schema":{"default":false,"type":"boolean"}},{"name":"includeHistory","required":false,"in":"query","description":"是否包含审批历史","schema":{"default":true,"type":"boolean"}}],"responses":{"default":{"description":"导出成功，返回JSON文件","content":{"application/json":{"example":{"exportMeta":{"version":"1.0.0","exportedAt":"2024-01-01T12:00:00Z","exportedBy":{"id":"user-uuid","name":"张三","email":"zhangsan@example.com"}},"report":{"id":"report-uuid","title":"某系统SQL注入漏洞","severity":"HIGH","status":"APPROVED"},"submitter":{"id":"user-uuid","name":"李四","email":"lisi@example.com"},"organization":{"id":"org-uuid","name":"示例公司","code":"EXAMPLE_CORP"}}}}}},"security":[{"jwt":[]}],"summary":"导出漏洞报告","tags":["漏洞报告管理"]}},"/api/bug-reports/import":{"post":{"description":"从JSON文件导入漏洞报告，支持重新创建报告和附件","operationId":"BugReportsController_importBugReport","parameters":[],"requestBody":{"required":true,"description":"导入的JSON文件和相关选项","content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"导出的JSON文件"},"asNewReport":{"type":"boolean","description":"是否作为新报告导入","default":true},"includeHistory":{"type":"boolean","description":"是否导入审批历史","default":false},"importNote":{"type":"string","description":"导入备注"}},"required":["file"]}}}},"responses":{"200":{"description":"导入成功","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"new-report-uuid"},"title":{"type":"string","example":"导入的漏洞报告标题"},"severity":{"type":"string","example":"HIGH"},"status":{"type":"string","example":"DRAFT"},"createdAt":{"type":"string","example":"2024-01-01T12:30:00Z"}}}}}}},"security":[{"jwt":[]}],"summary":"导入漏洞报告","tags":["漏洞报告管理"]}}},"info":{"title":"付费阅读服务 API","description":"基于邮箱授权码的付费内容访问控制服务 - 提供轻量安全的内容付费解决方案，支持邮箱验证、授权码管理、访问控制和风险检测等功能","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"jwt":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"输入 JWT token","in":"header"}},"schemas":{"StandardResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"type":"object","description":"响应数据"}},"required":["code","data"]},"CreateOrganizationDto":{"type":"object","properties":{"name":{"type":"string","minLength":2,"maxLength":100,"description":"组织名称"},"code":{"type":"string","minLength":2,"maxLength":50,"description":"组织编码"},"remark":{"type":"string","maxLength":500,"description":"组织备注"},"isActive":{"type":"boolean","description":"组织状态"}},"required":["name","code"]},"OrganizationResponseDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"组织 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"组织名称"},"code":{"type":"string","minLength":2,"maxLength":50,"description":"组织编码"},"remark":{"type":"string","maxLength":500,"description":"组织备注"},"isActive":{"type":"boolean","description":"组织状态"},"departmentCount":{"type":"number","description":"部门数量统计"},"userCount":{"type":"number","description":"用户数量统计"}},"required":["createdAt","id","name","code"]},"OrganizationApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"组织数据","allOf":[{"$ref":"#/components/schemas/OrganizationResponseDto"}]}},"required":["code","data"]},"SearchMode":{"type":"string","enum":["global","exact","combined","advanced"]},"LogicalOperator":{"type":"string","enum":["and","or"]},"Object":{"type":"object","properties":{}},"SortOrder":{"type":"string","enum":["asc","desc"]},"OrganizationListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"组织 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"组织名称"},"code":{"type":"string","minLength":2,"maxLength":50,"description":"组织编码"},"remark":{"type":"string","maxLength":500,"description":"组织备注"},"isActive":{"type":"boolean","description":"组织状态"},"departmentCount":{"type":"number","description":"部门数量统计"},"userCount":{"type":"number","description":"用户数量统计"}},"required":["createdAt","id","name","code"]},"PaginationMetaDto":{"type":"object","properties":{"total":{"type":"number","description":"总记录数","example":100},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页记录数","example":10},"totalPages":{"type":"number","description":"总页数","example":10},"hasNextPage":{"type":"boolean","description":"是否有下一页","example":true},"hasPrevPage":{"type":"boolean","description":"是否有上一页","example":false}},"required":["total","page","pageSize","totalPages","hasNextPage","hasPrevPage"]},"OrganizationListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"组织列表数据","type":"array","items":{"$ref":"#/components/schemas/OrganizationListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"OrganizationRefDto":{"type":"object","properties":{"id":{"type":"string","description":"组织 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"组织名称"},"code":{"type":"string","minLength":2,"maxLength":50,"description":"组织编码"}},"required":["id","name","code"]},"DepartmentRefDto":{"type":"object","properties":{"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"parent":{"description":"上级部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]}},"required":["id","name"]},"UserListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"用户 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"},"avatarUrl":{"type":"string","description":"头像URL"},"isActive":{"type":"boolean","description":"账户是否激活","default":true},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"department":{"description":"所属部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]}},"required":["createdAt","id","email","organization"]},"UserListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"用户列表数据","type":"array","items":{"$ref":"#/components/schemas/UserListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"UpdateOrganizationDto":{"type":"object","properties":{"name":{"type":"string","minLength":2,"maxLength":100,"description":"组织名称"},"code":{"type":"string","minLength":2,"maxLength":50,"description":"组织编码"},"remark":{"type":"string","maxLength":500,"description":"组织备注"},"isActive":{"type":"boolean","description":"组织状态"}}},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"},"avatarUrl":{"type":"string","description":"头像URL"},"password":{"type":"string","minLength":6,"description":"密码"},"orgId":{"type":"string","description":"组织 ID"},"departmentId":{"type":"string","description":"部门 ID"}},"required":["email","password","orgId"]},"RoleResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"角色ID"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"角色名称","example":"组织管理员"},"slug":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"角色标识符","example":"org_admin"},"system":{"type":"boolean","description":"是否为系统内置角色"},"isActive":{"type":"boolean","description":"角色是否启用"}},"required":["id","name","slug","system","isActive"]},"UserRoleDto":{"type":"object","properties":{"role":{"description":"角色","allOf":[{"$ref":"#/components/schemas/RoleResponseDto"}]}},"required":["role"]},"UserResponseDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"用户 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"},"avatarUrl":{"type":"string","description":"头像URL"},"isActive":{"type":"boolean","description":"账户是否激活","default":true},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"department":{"description":"所属部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]},"userRoles":{"description":"用户角色","type":"array","items":{"$ref":"#/components/schemas/UserRoleDto"}},"permissions":{"description":"权限标识列表","type":"array","items":{"type":"string"}}},"required":["createdAt","id","email","organization"]},"UserApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"用户数据","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["code","data"]},"AdvancedStringSearchOperators":{"type":"object","properties":{"eq":{"type":"string","description":"等于"},"neq":{"type":"string","description":"不等于"},"in":{"description":"包含","type":"array","items":{"type":"string"}},"notIn":{"description":"不包含","type":"array","items":{"type":"string"}},"contains":{"type":"string","description":"包含子字符串"},"startsWith":{"type":"string","description":"以...开始"},"endsWith":{"type":"string","description":"以...结束"},"regex":{"type":"string","description":"正则表达式匹配"},"ilike":{"type":"string","description":"不区分大小写匹配"},"isNull":{"type":"boolean","description":"是否为空"},"isNotNull":{"type":"boolean","description":"是否不为空"}}},"AdvancedBooleanSearchOperators":{"type":"object","properties":{"eq":{"type":"boolean","description":"等于"},"neq":{"type":"boolean","description":"不等于"},"isNull":{"type":"boolean","description":"是否为空"},"isNotNull":{"type":"boolean","description":"是否不为空"}}},"AdvancedDateSearchOperators":{"type":"object","properties":{"eq":{"format":"date-time","type":"string","description":"等于"},"neq":{"format":"date-time","type":"string","description":"不等于"},"gt":{"format":"date-time","type":"string","description":"大于"},"gte":{"format":"date-time","type":"string","description":"大于等于"},"lt":{"format":"date-time","type":"string","description":"小于"},"lte":{"format":"date-time","type":"string","description":"小于等于"},"between":{"description":"范围查询 [开始日期, 结束日期]","type":"array","items":{"format":"date-time","type":"string"}},"isNull":{"type":"boolean","description":"是否为空"},"isNotNull":{"type":"boolean","description":"是否不为空"}}},"UpdateUserDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"},"isActive":{"type":"boolean","description":"账户是否激活","default":true},"departmentId":{"type":"string","description":"部门 ID"}}},"DeleteUserResponseDataDto":{"type":"object","properties":{"deleted":{"type":"boolean","description":"是否删除成功","example":true}},"required":["deleted"]},"DeleteUserApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"删除用户响应数据","allOf":[{"$ref":"#/components/schemas/DeleteUserResponseDataDto"}]}},"required":["code","data"]},"CreatePermissionDto":{"type":"object","properties":{"resource":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"资源名称","example":"users"},"action":{"type":"string","maxLength":20,"pattern":"^[a-z*][a-z0-9_]*$","description":"操作类型","example":"read"},"description":{"type":"string","maxLength":100,"description":"权限描述","example":"查看用户信息"}},"required":["resource","action"]},"PermissionDetailResponseDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"权限ID"},"resource":{"type":"string","description":"资源名称","example":"users"},"action":{"type":"string","description":"操作类型","example":"read"},"slug":{"type":"string","description":"权限标识符","example":"users:read"},"description":{"type":"string","description":"权限描述","example":"查看用户信息"},"system":{"type":"boolean","description":"是否为系统权限","example":true}},"required":["createdAt","id","resource","action","slug","system"]},"PermissionApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"权限详情","allOf":[{"$ref":"#/components/schemas/PermissionDetailResponseDto"}]}},"required":["code","data"]},"PermissionListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"权限ID"},"resource":{"type":"string","description":"资源名称","example":"users"},"action":{"type":"string","description":"操作类型","example":"read"},"slug":{"type":"string","description":"权限标识符","example":"users:read"},"description":{"type":"string","description":"权限描述","example":"查看用户信息"},"system":{"type":"boolean","description":"是否为系统权限","example":true}},"required":["createdAt","id","resource","action","slug","system"]},"PermissionListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"权限列表","type":"array","items":{"$ref":"#/components/schemas/PermissionListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"FileUploadResponseDataDto":{"type":"object","properties":{"id":{"type":"string","description":"文件唯一标识","example":"abc123def456"},"originalName":{"type":"string","description":"原始文件名","example":"document.pdf"},"size":{"type":"number","description":"文件大小（字节）","example":1024000},"mimeType":{"type":"string","description":"文件MIME类型","example":"application/pdf"},"publicUrl":{"type":"string","description":"文件公共访问URL","example":"http://localhost:3000/api/static/documents/abc123def456.pdf"},"uploadedAt":{"type":"string","description":"文件上传时间","example":"2024-01-01T12:00:00.000Z"}},"required":["id","originalName","size","mimeType","publicUrl","uploadedAt"]},"FileUploadApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"文件上传响应数据","allOf":[{"$ref":"#/components/schemas/FileUploadResponseDataDto"}]}},"required":["code","data"]},"MultipleFileUploadApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"多文件上传响应数据","type":"array","items":{"$ref":"#/components/schemas/FileUploadResponseDataDto"}}},"required":["code","data"]},"FileInfoApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"文件信息响应数据","allOf":[{"$ref":"#/components/schemas/FileUploadResponseDataDto"}]}},"required":["code","data"]},"FileDeleteApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"type":"object","description":"删除成功，无返回数据","example":null}},"required":["code","data"]},"FileDeleteResponseDataDto":{"type":"object","properties":{"success":{"description":"删除成功的文件ID列表","example":["abc123","def456"],"type":"array","items":{"type":"string"}},"failed":{"description":"删除失败的文件ID列表","example":["xyz789"],"type":"array","items":{"type":"string"}}},"required":["success","failed"]},"BatchFileDeleteApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"批量删除响应数据","allOf":[{"$ref":"#/components/schemas/FileDeleteResponseDataDto"}]}},"required":["code","data"]},"CreateDepartmentDto":{"type":"object","properties":{"orgId":{"type":"string","description":"所属组织 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"isActive":{"type":"boolean","description":"部门状态"},"parentId":{"type":"string","description":"上级部门 ID，空字符串表示获取顶级部门"},"organization":{"type":"object","properties":{"connect":{"type":"object","properties":{"id":{"type":"string"}},"selfRequired":true}},"required":["connect"]},"parent":{"type":"object","properties":{"connect":{"type":"object","properties":{"id":{"type":"string"}},"selfRequired":true}},"required":["connect"]}},"required":["orgId","name"]},"DepartmentResponseDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"isActive":{"type":"boolean","description":"部门状态"},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"parent":{"description":"上级部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]},"childrenCount":{"type":"number","description":"子部门数量统计"},"userCount":{"type":"number","description":"用户数量统计"}},"required":["createdAt","id","name","organization"]},"DepartmentApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门数据","allOf":[{"$ref":"#/components/schemas/DepartmentResponseDto"}]}},"required":["code","data"]},"DepartmentListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"isActive":{"type":"boolean","description":"部门状态"},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"parent":{"description":"上级部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]},"childrenCount":{"type":"number","description":"子部门数量统计"},"userCount":{"type":"number","description":"用户数量统计"},"_count":{"type":"object","description":"用户数量统计"}},"required":["createdAt","id","name","organization","_count"]},"DepartmentListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门列表数据","type":"array","items":{"$ref":"#/components/schemas/DepartmentListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"OnlineDepartmentDto":{"type":"object","properties":{"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"}},"required":["id","name"]},"DepartmentOnlineStatsDto":{"type":"object","properties":{"department":{"description":"部门信息","allOf":[{"$ref":"#/components/schemas/OnlineDepartmentDto"}]},"online":{"type":"number","description":"在线人数","example":8}},"required":["department","online"]},"DepartmentOnlineStatsSummaryDto":{"type":"object","properties":{"totalOnline":{"type":"number","description":"总在线人数","example":45},"departments":{"description":"各部门在线人数统计","type":"array","items":{"$ref":"#/components/schemas/DepartmentOnlineStatsDto"}}},"required":["totalOnline","departments"]},"DepartmentOnlineStatsApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门在线人数统计汇总数据","allOf":[{"$ref":"#/components/schemas/DepartmentOnlineStatsSummaryDto"}]}},"required":["code","data"]},"DepartmentTreeNodeDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"isActive":{"type":"boolean","description":"部门状态"},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"parent":{"description":"上级部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentRefDto"}]},"childrenCount":{"type":"number","description":"子部门数量统计"},"userCount":{"type":"number","description":"用户数量统计"},"_count":{"type":"object","description":"用户数量统计"},"children":{"description":"子部门","type":"array","items":{"$ref":"#/components/schemas/DepartmentTreeNodeDto"}}},"required":["createdAt","id","name","organization","_count"]},"DepartmentTreeApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门树数据","type":"array","items":{"$ref":"#/components/schemas/DepartmentTreeNodeDto"}}},"required":["code","data"]},"UpdateDepartmentDto":{"type":"object","properties":{"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"isActive":{"type":"boolean","description":"部门状态"},"parentId":{"type":"string","description":"上级部门 ID，空字符串表示获取顶级部门"},"organization":{"type":"object","properties":{"connect":{"type":"object","properties":{"id":{"type":"string"}},"selfRequired":true}},"required":["connect"]},"parent":{"type":"object","properties":{"connect":{"type":"object","properties":{"id":{"type":"string"}},"selfRequired":true}},"required":["connect"]}}},"DepartmentMembersApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门成员列表数据","type":"array","items":{"$ref":"#/components/schemas/UserListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"CreateUserInDepartmentDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"},"avatarUrl":{"type":"string","description":"头像URL"},"password":{"type":"string","minLength":6,"description":"密码"}},"required":["email","password"]},"RegisterResponseDataDto":{"type":"object","properties":{"user":{"description":"用户信息","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["user"]},"RegisterApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"注册响应数据","allOf":[{"$ref":"#/components/schemas/RegisterResponseDataDto"}]}},"required":["code","data"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"password":{"type":"string","minLength":6,"description":"密码"}},"required":["email","password"]},"LoginResponseDataDto":{"type":"object","properties":{"user":{"description":"用户信息","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]},"accessToken":{"type":"string","description":"访问令牌","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"刷新令牌","example":"a1b2c3d4-e5f6-7890-1234-567890abcdef"}},"required":["user","accessToken","refreshToken"]},"LoginApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"登录响应数据","allOf":[{"$ref":"#/components/schemas/LoginResponseDataDto"}]}},"required":["code","data"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"刷新令牌"}},"required":["refreshToken"]},"RefreshTokenApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"刷新令牌响应数据","allOf":[{"$ref":"#/components/schemas/LoginResponseDataDto"}]}},"required":["code","data"]},"RequestPasswordResetDto":{"type":"object","properties":{"email":{"type":"string","description":"邮箱地址","format":"email"}},"required":["email"]},"PasswordResetRequestDataDto":{"type":"object","properties":{"token":{"type":"string","description":"密码重置令牌","example":"reset-token-uuid"}},"required":["token"]},"PasswordResetRequestApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"密码重置请求响应数据","allOf":[{"$ref":"#/components/schemas/PasswordResetRequestDataDto"}]}},"required":["code","data"]},"ResetPasswordDto":{"type":"object","properties":{"token":{"type":"string","description":"重置密码令牌"},"password":{"type":"string","description":"新密码","minLength":6},"confirmPassword":{"type":"string","description":"确认密码","minLength":6}},"required":["token","password","confirmPassword"]},"PasswordResetSuccessApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"type":"object","description":"响应数据","nullable":true,"example":null}},"required":["code","data"]},"UpdateProfileDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"name":{"type":"string","description":"用户名/姓名","example":"张三"},"phone":{"type":"string","description":"手机号"}}},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"当前密码"},"newPassword":{"type":"string","description":"新密码","minLength":6},"confirmNewPassword":{"type":"string","description":"确认新密码","minLength":6}},"required":["currentPassword","newPassword","confirmNewPassword"]},"ChangePasswordApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"type":"object","description":"修改密码响应数据","nullable":true,"example":null}},"required":["code","data"]},"TokenVerifyResponseDataDto":{"type":"object","properties":{"user":{"description":"用户信息","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["user"]},"TokenVerifyApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"令牌验证响应数据","allOf":[{"$ref":"#/components/schemas/TokenVerifyResponseDataDto"}]}},"required":["code","data"]},"LogoutApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"type":"object","description":"响应数据","nullable":true,"example":null}},"required":["code","data"]},"CreateRoleDto":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":20,"description":"角色名称","example":"组织管理员"},"slug":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"角色标识符","example":"org_admin"},"description":{"type":"string","maxLength":200,"description":"角色描述","example":"负责组织内部的用户管理和部门管理"},"permissionIds":{"description":"权限ID列表","type":"array","items":{"type":"string","format":"uuid"}}},"required":["name","slug"]},"BasePermissionDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"权限ID"},"resource":{"type":"string","description":"资源名称","example":"users"},"action":{"type":"string","description":"操作类型","example":"read"},"slug":{"type":"string","description":"权限标识符","example":"users:read"},"description":{"type":"string","description":"权限描述","example":"查看用户信息"},"system":{"type":"boolean","description":"是否为系统权限","example":true}},"required":["createdAt","id","resource","action","slug","system"]},"RolePermissionDto":{"type":"object","properties":{"id":{"type":"string","description":"角色权限关联 ID"},"roleId":{"type":"string","description":"角色 ID"},"permissionId":{"type":"string","description":"权限 ID"},"permission":{"description":"权限详情","allOf":[{"$ref":"#/components/schemas/BasePermissionDto"}]}},"required":["id","roleId","permissionId","permission"]},"RoleCountDto":{"type":"object","properties":{"userRoles":{"type":"number","description":"用户角色关联数量","example":5}},"required":["userRoles"]},"RoleDetailResponseDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"角色ID"},"orgId":{"type":"string","description":"组织 ID，null 表示系统级角色"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"角色名称","example":"组织管理员"},"slug":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"角色标识符","example":"org_admin"},"description":{"type":"string","maxLength":200,"description":"角色描述","example":"负责组织内部的用户管理和部门管理"},"system":{"type":"boolean","description":"是否为系统内置角色"},"isActive":{"type":"boolean","description":"角色是否启用"},"organization":{"description":"所属组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"rolePermissions":{"description":"角色权限列表","type":"array","items":{"$ref":"#/components/schemas/RolePermissionDto"}},"_count":{"description":"角色统计信息","allOf":[{"$ref":"#/components/schemas/RoleCountDto"}]}},"required":["createdAt","id","name","slug","system","isActive","rolePermissions","_count"]},"RoleApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"角色详情","allOf":[{"$ref":"#/components/schemas/RoleDetailResponseDto"}]}},"required":["code","data"]},"RoleListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"角色ID"},"orgId":{"type":"string","description":"组织 ID，null 表示系统级角色"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"角色名称","example":"组织管理员"},"slug":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"角色标识符","example":"org_admin"},"description":{"type":"string","maxLength":200,"description":"角色描述","example":"负责组织内部的用户管理和部门管理"},"system":{"type":"boolean","description":"是否为系统内置角色"},"isActive":{"type":"boolean","description":"角色是否启用"}},"required":["createdAt","id","name","slug","system","isActive"]},"RoleListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"角色列表","type":"array","items":{"$ref":"#/components/schemas/RoleListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"UpdateRoleDto":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":20,"description":"角色名称","example":"组织管理员"},"slug":{"type":"string","maxLength":30,"pattern":"^[a-z][a-z0-9_]*$","description":"角色标识符","example":"org_admin"},"description":{"type":"string","maxLength":200,"description":"角色描述","example":"负责组织内部的用户管理和部门管理"},"permissionIds":{"description":"权限ID列表","type":"array","items":{"type":"string","format":"uuid"}},"isActive":{"type":"boolean","description":"角色是否启用"}}},"AddRoleMembersDto":{"type":"object","properties":{"userIds":{"description":"用户 ID 列表","type":"array","items":{"type":"string"}},"expiresAt":{"type":"string","description":"过期时间"},"note":{"type":"string","description":"备注"}},"required":["userIds"]},"RemoveRoleMembersDto":{"type":"object","properties":{"userIds":{"description":"用户 ID 列表","type":"array","items":{"type":"string"}}},"required":["userIds"]},"CreateLicenseDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"remark":{"type":"string","description":"备注信息","example":"为付费用户发放"},"purchaseAmount":{"type":"number","minimum":1,"description":"购买金额（单位：元）","example":99.99},"expiresAt":{"format":"date-time","type":"string","description":"过期时间（可选，不设置则为永久授权）","example":"2024-12-31T23:59:59Z"}},"required":["email","purchaseAmount"]},"CreateLicenseResponseDataDto":{"type":"object","properties":{"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"},"messageId":{"type":"string","description":"邮件消息ID","example":"msg-123456789"}},"required":["code","messageId"]},"CreateLicenseApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"创建授权码响应数据","allOf":[{"$ref":"#/components/schemas/CreateLicenseResponseDataDto"}]}},"required":["code","data"]},"LicenseStatsDto":{"type":"object","properties":{"totalAccesses":{"type":"number","description":"总访问次数","example":150},"commonIPs":{"description":"常用IP地址列表","example":["192.168.1.1","10.0.0.1"],"type":"array","items":{"type":"string"}},"recentRiskyAccesses":{"type":"number","description":"最近风险访问次数","example":2},"lastAccessTime":{"format":"date-time","type":"string","description":"最后访问时间","example":"2024-01-15T10:30:00Z"},"riskLevel":{"enum":["SAFE","LOW","MEDIUM","HIGH"],"type":"string","description":"风险等级","example":"LOW"},"isRisky":{"type":"boolean","description":"是否为风险访问","example":false}},"required":["totalAccesses","commonIPs","recentRiskyAccesses","riskLevel","isRisky"]},"LicenseDetailWithStatsDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"授权码 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"},"remark":{"type":"string","description":"备注信息","example":"为付费用户发放"},"locked":{"type":"boolean","description":"是否锁定","example":false},"isUsed":{"type":"boolean","description":"是否已使用","example":false},"pagePath":{"type":"string","description":"访问的页面路径","example":"/premium/article/123"},"purchaseAmount":{"type":"number","minimum":1,"description":"购买金额（单位：元）","example":99.99},"lastIP":{"type":"string","description":"最后一次访问 IP","example":"192.168.1.1"},"warningCount":{"type":"number","description":"警告次数","example":0},"expiresAt":{"format":"date-time","type":"string","description":"过期时间（可选，不设置则为永久授权）","example":"2024-12-31T23:59:59Z"},"stats":{"description":"统计信息","allOf":[{"$ref":"#/components/schemas/LicenseStatsDto"}]}},"required":["createdAt","id","email","code","purchaseAmount","stats"]},"LicenseDetailApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码详情数据","allOf":[{"$ref":"#/components/schemas/LicenseDetailWithStatsDto"}]}},"required":["code","data"]},"UpdateLicenseDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"remark":{"type":"string","description":"备注信息","example":"为付费用户发放"},"purchaseAmount":{"type":"number","minimum":1,"description":"购买金额（单位：元）","example":99.99},"expiresAt":{"format":"date-time","type":"string","description":"过期时间（可选，不设置则为永久授权）","example":"2024-12-31T23:59:59Z"}}},"UpdateLicenseResponseDataDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"授权码 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"},"remark":{"type":"string","description":"备注信息","example":"为付费用户发放"},"locked":{"type":"boolean","description":"是否锁定","example":false},"isUsed":{"type":"boolean","description":"是否已使用","example":false},"pagePath":{"type":"string","description":"访问的页面路径","example":"/premium/article/123"},"purchaseAmount":{"type":"number","minimum":1,"description":"购买金额（单位：元）","example":99.99},"lastIP":{"type":"string","description":"最后一次访问 IP","example":"192.168.1.1"},"warningCount":{"type":"number","description":"警告次数","example":0},"expiresAt":{"format":"date-time","type":"string","description":"过期时间（可选，不设置则为永久授权）","example":"2024-12-31T23:59:59Z"}},"required":["createdAt","id","email","code","purchaseAmount"]},"UpdateLicenseApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码更新结果数据","allOf":[{"$ref":"#/components/schemas/UpdateLicenseResponseDataDto"}]}},"required":["code","data"]},"DeleteLicenseResponseDataDto":{"type":"object","properties":{"deleted":{"type":"boolean","description":"是否删除成功","example":true}},"required":["deleted"]},"DeleteLicenseApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码删除结果数据","allOf":[{"$ref":"#/components/schemas/DeleteLicenseResponseDataDto"}]}},"required":["code","data"]},"AdvancedNumberSearchOperators":{"type":"object","properties":{"eq":{"type":"number","description":"等于"},"neq":{"type":"number","description":"不等于"},"gt":{"type":"number","description":"大于"},"gte":{"type":"number","description":"大于等于"},"lt":{"type":"number","description":"小于"},"lte":{"type":"number","description":"小于等于"},"in":{"description":"包含","type":"array","items":{"type":"number"}},"notIn":{"description":"不包含","type":"array","items":{"type":"number"}},"between":{"description":"范围查询 [最小值, 最大值]","type":"array","items":{"type":"number"}},"isNull":{"type":"boolean","description":"是否为空"},"isNotNull":{"type":"boolean","description":"是否不为空"}}},"RiskLevelSearchOperators":{"type":"object","properties":{"eq":{"type":"string","description":"等于","enum":["SAFE","LOW","MEDIUM","HIGH"]},"neq":{"type":"string","description":"不等于","enum":["SAFE","LOW","MEDIUM","HIGH"]},"in":{"type":"array","description":"包含","items":{"type":"string","enum":["SAFE","LOW","MEDIUM","HIGH"]}},"notIn":{"type":"array","description":"不包含","items":{"type":"string","enum":["SAFE","LOW","MEDIUM","HIGH"]}}}},"AggregateFilterDto":{"type":"object","properties":{"function":{"enum":["count","sum","avg","min","max"],"type":"string","description":"聚合函数"},"field":{"type":"string","description":"聚合字段"},"relation":{"type":"string","description":"关联表名"},"gte":{"type":"number","description":"最小值"},"lte":{"type":"number","description":"最大值"},"eq":{"type":"number","description":"等于"}}},"LicenseListItemDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"授权码 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"},"remark":{"type":"string","description":"备注信息","example":"为付费用户发放"},"locked":{"type":"boolean","description":"是否锁定","example":false},"isUsed":{"type":"boolean","description":"是否已使用","example":false},"purchaseAmount":{"type":"number","minimum":1,"description":"购买金额（单位：元）","example":99.99},"warningCount":{"type":"number","description":"警告次数","example":0},"expiresAt":{"format":"date-time","type":"string","description":"过期时间（可选，不设置则为永久授权）","example":"2024-12-31T23:59:59Z"}},"required":["createdAt","id","email","code","purchaseAmount"]},"LicenseListApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码列表数据","type":"array","items":{"$ref":"#/components/schemas/LicenseListItemDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"CheckUserLicenseDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"}},"required":["email","code"]},"CheckLicenseResponseDataDto":{"type":"object","properties":{"authorized":{"type":"boolean","description":"是否授权通过","example":true},"isRisky":{"type":"boolean","description":"是否为风险访问","example":false},"warning":{"type":"string","description":"警告信息","example":"检测到来自新IP的访问"}},"required":["authorized","isRisky"]},"CheckLicenseApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权验证结果数据","allOf":[{"$ref":"#/components/schemas/CheckLicenseResponseDataDto"}]}},"required":["code","data"]},"LogAccessDto":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"},"pagePath":{"type":"string","description":"访问的页面路径","example":"/premium/article/123"}},"required":["email","code"]},"LogAccessResponseDataDto":{"type":"object","properties":{"success":{"type":"boolean","description":"记录是否成功","example":true}},"required":["success"]},"LogAccessApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"nullable":true,"description":"访问日志记录结果数据","allOf":[{"$ref":"#/components/schemas/LogAccessResponseDataDto"}]}},"required":["code","data"]},"CheckLicenseDto":{"type":"object","properties":{"id":{"type":"string","description":"授权码 ID"},"email":{"type":"string","format":"email","description":"邮箱地址","example":"user@example.com"},"code":{"type":"string","description":"授权码","example":"ABCD-EFGH-IJKL-MNOP-Q"}}},"LicenseDetailsDto":{"type":"object","properties":{"isUsed":{"type":"boolean","description":"是否已使用","example":true},"locked":{"type":"boolean","description":"是否锁定","example":false},"expired":{"type":"boolean","description":"是否过期","example":false},"expiresAt":{"format":"date-time","type":"string","description":"过期时间","example":"2024-12-31T23:59:59Z"}},"required":["isUsed","locked","expired"]},"AdminCheckLicenseResponseDataDto":{"type":"object","properties":{"valid":{"type":"boolean","description":"授权码是否有效","example":true},"message":{"type":"string","description":"状态消息","example":"授权码有效且已使用"},"details":{"description":"详细状态信息","allOf":[{"$ref":"#/components/schemas/LicenseDetailsDto"}]}},"required":["valid","message","details"]},"AdminCheckLicenseApiResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"管理员授权码检查结果数据","allOf":[{"$ref":"#/components/schemas/AdminCheckLicenseResponseDataDto"}]}},"required":["code","data"]},"ToggleLockLicenseDto":{"type":"object","properties":{"id":{"type":"string","description":"授权码 ID"},"locked":{"type":"boolean","description":"是否锁定","example":false}},"required":["id"]},"ToggleLockResponseDataDto":{"type":"object","properties":{"locked":{"type":"boolean","description":"是否锁定","example":false}}},"SendRemindersResponseDataDto":{"type":"object","properties":{"sent":{"type":"number","description":"成功发送数量","example":5},"failed":{"type":"number","description":"发送失败数量","example":0},"errors":{"description":"错误信息列表","type":"array","items":{"type":"string"}}},"required":["sent","failed","errors"]},"TimeSeriesDataPointDto":{"type":"object","properties":{"timestamp":{"type":"string","description":"时间标签","example":"2024-01-01T00:00:00.000Z"},"value":{"type":"number","description":"数值","example":100},"metadata":{"type":"object","description":"额外的数据属性"}},"required":["timestamp","value"]},"DashboardOverviewDto":{"type":"object","properties":{"totalLicenseUsers":{"type":"number","description":"已有授权码用户总数","example":892},"totalLicenseRevenue":{"type":"number","description":"授权码总收入（元）","example":28560},"userGrowthRate":{"type":"number","description":"用户数增长率（%）","example":12.8},"revenueGrowthRate":{"type":"number","description":"收入增长率（%）","example":18.5},"userTimeSeries":{"description":"用户数时间序列数据","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}},"revenueTimeSeries":{"description":"收入时间序列数据","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}},"periodInfo":{"type":"object","description":"统计周期信息"}},"required":["totalLicenseUsers","totalLicenseRevenue","userGrowthRate","revenueGrowthRate","userTimeSeries","revenueTimeSeries","periodInfo"]},"DashboardOverviewResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"仪表盘概览统计数据","allOf":[{"$ref":"#/components/schemas/DashboardOverviewDto"}]}},"required":["code","data"]},"DistributionDataDto":{"type":"object","properties":{"key":{"type":"string","description":"分类键值","example":"active"},"value":{"type":"number","description":"数值","example":1500},"metadata":{"type":"object","description":"额外的业务属性"}},"required":["key","value"]},"UserStatisticsDto":{"type":"object","properties":{"totalUsers":{"type":"number","description":"总用户数"},"activeUsers":{"type":"number","description":"活跃用户数"},"newUsers":{"type":"number","description":"新增用户数"},"growthTrend":{"description":"用户增长趋势","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}},"statusDistribution":{"description":"用户状态分布","type":"array","items":{"$ref":"#/components/schemas/DistributionDataDto"}}},"required":["totalUsers","activeUsers","newUsers","growthTrend","statusDistribution"]},"UserStatisticsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"用户统计数据","allOf":[{"$ref":"#/components/schemas/UserStatisticsDto"}]}},"required":["code","data"]},"LicenseStatisticsDto":{"type":"object","properties":{"totalLicenses":{"type":"number","description":"总授权码数","example":5000},"usedLicenses":{"type":"number","description":"已使用授权码数","example":3200},"lockedLicenses":{"type":"number","description":"锁定授权码数","example":50},"expiredLicenses":{"type":"number","description":"过期授权码数","example":300},"statusDistribution":{"description":"状态分布","type":"array","items":{"$ref":"#/components/schemas/DistributionDataDto"}},"generationTrend":{"description":"生成趋势","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}}},"required":["totalLicenses","usedLicenses","lockedLicenses","expiredLicenses","statusDistribution","generationTrend"]},"LicenseStatisticsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码统计数据","allOf":[{"$ref":"#/components/schemas/LicenseStatisticsDto"}]}},"required":["code","data"]},"LicenseTrendDto":{"type":"object","properties":{"dailyTrend":{"description":"每日新增授权码趋势数据","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}},"totalNewLicenses":{"type":"number","description":"统计周期内总新增数量","example":1250},"averageDailyNew":{"type":"number","description":"日均新增数量","example":41.67},"peakDailyNew":{"type":"number","description":"最高单日新增数量","example":85},"periodInfo":{"type":"object","description":"统计周期信息"}},"required":["dailyTrend","totalNewLicenses","averageDailyNew","peakDailyNew","periodInfo"]},"LicenseTrendResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"授权码趋势统计数据","allOf":[{"$ref":"#/components/schemas/LicenseTrendDto"}]}},"required":["code","data"]},"RevenueStatisticsDto":{"type":"object","properties":{"totalRevenue":{"type":"number","description":"总收入","example":150000.5},"averageOrderValue":{"type":"number","description":"平均客单价","example":35.75},"revenueTrend":{"description":"收入趋势","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}}},"required":["totalRevenue","averageOrderValue","revenueTrend"]},"RevenueStatisticsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"收入统计数据","allOf":[{"$ref":"#/components/schemas/RevenueStatisticsDto"}]}},"required":["code","data"]},"AccessStatisticsDto":{"type":"object","properties":{"totalAccess":{"type":"number","description":"总访问量","example":50000},"uniqueVisitors":{"type":"number","description":"独立访问者数","example":3200},"riskyAccess":{"type":"number","description":"风险访问数","example":120},"accessTrend":{"description":"访问趋势","type":"array","items":{"$ref":"#/components/schemas/TimeSeriesDataPointDto"}},"hourlyDistribution":{"description":"小时分布（24小时）","type":"array","items":{"$ref":"#/components/schemas/DistributionDataDto"}},"geoDistribution":{"description":"地理分布","type":"array","items":{"$ref":"#/components/schemas/DistributionDataDto"}}},"required":["totalAccess","uniqueVisitors","riskyAccess","accessTrend","hourlyDistribution","geoDistribution"]},"AccessStatisticsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"访问统计数据","allOf":[{"$ref":"#/components/schemas/AccessStatisticsDto"}]}},"required":["code","data"]},"RiskAnalysisDto":{"type":"object","properties":{"riskAccessRatio":{"type":"number","description":"风险访问比例","example":2.4},"riskTypeDistribution":{"description":"风险类型分布","type":"array","items":{"$ref":"#/components/schemas/DistributionDataDto"}},"ipAnomalyStats":{"type":"object","description":"IP异常统计"},"riskControlEffectiveness":{"type":"object","description":"风控效果评估"}},"required":["riskAccessRatio","riskTypeDistribution","ipAnomalyStats","riskControlEffectiveness"]},"RiskAnalysisResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"风控分析数据","allOf":[{"$ref":"#/components/schemas/RiskAnalysisDto"}]}},"required":["code","data"]},"FunnelStageDto":{"type":"object","properties":{"stageKey":{"type":"string","description":"阶段标识符","example":"license_obtained"},"count":{"type":"number","description":"阶段数量","example":1000},"order":{"type":"number","description":"阶段顺序","example":1}},"required":["stageKey","count","order"]},"ConversionFunnelDto":{"type":"object","properties":{"stages":{"description":"漏斗各阶段数据","type":"array","items":{"$ref":"#/components/schemas/FunnelStageDto"}},"conversionPath":{"type":"object","description":"转化路径信息"}},"required":["stages","conversionPath"]},"ConversionFunnelResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"转化漏斗分析数据","allOf":[{"$ref":"#/components/schemas/ConversionFunnelDto"}]}},"required":["code","data"]},"RealtimeMonitoringDto":{"type":"object","properties":{"currentOnlineUsers":{"type":"number","description":"当前在线用户数","example":25},"realtimeAccess":{"type":"number","description":"实时访问量（最近5分钟）","example":45},"todayRevenue":{"type":"number","description":"实时收入（今日）","example":1250},"systemStatus":{"type":"object","description":"系统状态"}},"required":["currentOnlineUsers","realtimeAccess","todayRevenue","systemStatus"]},"RealtimeMonitoringResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"实时监控数据","allOf":[{"$ref":"#/components/schemas/RealtimeMonitoringDto"}]}},"required":["code","data"]},"CreateBugReportDto":{"type":"object","properties":{"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachmentIds":{"description":"附件ID列表（来自文件上传接口的临时文件ID）","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}}},"required":["title","severity"]},"AttachmentDto":{"type":"object","properties":{"id":{"type":"string","description":"附件ID（临时文件ID）","example":"abc123"},"originalName":{"type":"string","description":"原始文件名","example":"screenshot.png"},"size":{"type":"number","description":"文件大小（字节）","example":102400},"mimeType":{"type":"string","description":"文件MIME类型","example":"image/png"}},"required":["id","originalName","size","mimeType"]},"UserRefDto":{"type":"object","properties":{"id":{"type":"string","description":"用户ID","example":"user-uuid"},"email":{"type":"string","format":"email","description":"用户邮箱","example":"zhangsan@example.com"},"name":{"type":"string","description":"用户姓名","example":"张三"},"avatarUrl":{"type":"string","description":"用户头像URL","example":"https://example.com/avatar.jpg"}},"required":["id","email"]},"BugReportDataDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"漏洞报告ID","example":"uuid-string"},"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachments":{"description":"附件列表","type":"array","items":{"$ref":"#/components/schemas/AttachmentDto"}},"status":{"type":"string","description":"报告状态","enum":["DRAFT","PENDING","IN_REVIEW","APPROVED","REJECTED","RESOLVED","CLOSED"],"example":"PENDING"},"userId":{"type":"string","description":"提交用户ID","example":"user-uuid"},"orgId":{"type":"string","description":"组织ID","example":"org-uuid"},"reviewerId":{"type":"string","description":"审核人ID","example":"reviewer-uuid"},"reviewNote":{"type":"string","description":"审核备注","example":"漏洞确认，建议尽快修复"},"reviewedAt":{"format":"date-time","type":"string","description":"审核时间","example":"2024-01-01T00:00:00Z"},"user":{"description":"提交用户信息","allOf":[{"$ref":"#/components/schemas/UserRefDto"}]},"reviewer":{"description":"审核人信息","allOf":[{"$ref":"#/components/schemas/UserRefDto"}]},"organization":{"description":"组织信息","allOf":[{"$ref":"#/components/schemas/OrganizationRefDto"}]},"attachmentIds":{"description":"附件ID列表","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}}},"required":["createdAt","id","title","severity","status","userId","orgId"]},"BugReportResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"漏洞报告数据","allOf":[{"$ref":"#/components/schemas/BugReportDataDto"}]}},"required":["code","data"]},"BugReportSummaryDto":{"type":"object","properties":{"createdAt":{"format":"date-time","type":"string","description":"开始时间","example":"2024-01-01T00:00:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2024-01-01T00:00:00Z"},"id":{"type":"string","description":"漏洞报告ID","example":"uuid-string"},"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"status":{"type":"string","description":"报告状态","enum":["DRAFT","PENDING","IN_REVIEW","APPROVED","REJECTED","RESOLVED","CLOSED"],"example":"PENDING"},"userId":{"type":"string","description":"提交用户ID","example":"user-uuid"},"orgId":{"type":"string","description":"组织ID","example":"org-uuid"},"user":{"description":"提交用户信息","allOf":[{"$ref":"#/components/schemas/UserRefDto"}]},"attachmentCount":{"type":"number","description":"附件数量","example":3},"hasUrls":{"type":"boolean","description":"是否有URL","example":true}},"required":["createdAt","id","title","severity","status","userId","orgId"]},"PaginatedBugReportsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"漏洞报告列表","type":"array","items":{"$ref":"#/components/schemas/BugReportSummaryDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"TimelineBugReportDto":{"type":"object","properties":{"id":{"type":"string","description":"漏洞报告ID","example":"uuid-string"},"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"status":{"type":"string","description":"报告状态","enum":["DRAFT","PENDING","IN_REVIEW","APPROVED","REJECTED","RESOLVED","CLOSED"],"example":"PENDING"}},"required":["id","title","severity","status"]},"TimelineEventDto":{"type":"object","properties":{"id":{"type":"string","description":"事件ID"},"eventType":{"enum":["SUBMIT","APPROVE","REJECT","REQUEST_INFO","FORWARD","RESUBMIT","UPDATE"],"type":"string","description":"事件类型"},"createdAt":{"format":"date-time","type":"string","description":"事件发生时间"},"bugReport":{"description":"漏洞报告信息","allOf":[{"$ref":"#/components/schemas/TimelineBugReportDto"}]},"user":{"type":"object","description":"操作用户信息"},"approvalInfo":{"type":"object","description":"审批相关信息（仅审批事件有值）"},"description":{"type":"string","description":"事件描述"},"organization":{"type":"object","description":"组织信息"}},"required":["id","eventType","createdAt","bugReport","user","organization"]},"TimelineEventResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"时间线事件列表","type":"array","items":{"$ref":"#/components/schemas/TimelineEventDto"}},"pagination":{"description":"分页信息","allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]}},"required":["code","data"]},"SaveDraftDto":{"type":"object","properties":{"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachmentIds":{"description":"附件ID列表（来自文件上传接口的临时文件ID）","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}}}},"SubmitDraftDto":{"type":"object","properties":{"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachmentIds":{"description":"附件ID列表（来自文件上传接口的临时文件ID）","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}}},"required":["title","severity"]},"ResubmitBugReportDto":{"type":"object","properties":{"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachmentIds":{"description":"附件ID列表（来自文件上传接口的临时文件ID）","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}},"resubmitNote":{"type":"string","description":"重新提交说明","example":"已根据审核意见修改漏洞描述和附件"}}},"ProcessApprovalDto":{"type":"object","properties":{"action":{"enum":["APPROVE","REJECT","REQUEST_INFO","FORWARD"],"type":"string","description":"审批动作","example":"APPROVE"},"comment":{"type":"string","description":"审批意见","example":"漏洞确认，风险等级合理，建议尽快修复","maxLength":1000},"targetUserId":{"type":"string","format":"uuid","description":"转发目标用户ID（仅当action为FORWARD时需要）","example":"uuid-string"}},"required":["action","comment"]},"DepartmentInfoDto":{"type":"object","properties":{"id":{"type":"string","description":"部门 ID"},"name":{"type":"string","minLength":2,"maxLength":100,"description":"部门名称"},"remark":{"type":"string","maxLength":500,"description":"部门备注","example":"研发部负责研发工作"},"parentName":{"type":"string","description":"父部门名称","example":"研发中心"},"path":{"type":"string","description":"部门层级路径","example":"研发中心/技术部"}},"required":["id","name"]},"DepartmentReportStatsDto":{"type":"object","properties":{"department":{"description":"部门信息","allOf":[{"$ref":"#/components/schemas/DepartmentInfoDto"}]},"reportCount":{"type":"number","description":"总报告数量","example":25},"statusCounts":{"type":"object","description":"各状态报告数量统计，key为状态值，value为包含状态和数量的对象","additionalProperties":{"type":"object","properties":{"status":{"enum":["DRAFT","PENDING","IN_REVIEW","APPROVED","REJECTED","RESOLVED","CLOSED"]},"count":{"type":"number"}}}}},"required":["department","reportCount","statusCounts"]},"DepartmentReportsStatsDataDto":{"type":"object","properties":{"totalReports":{"type":"number","description":"总报告数","example":150},"totalDepartments":{"type":"number","description":"参与部门数","example":8},"departmentStats":{"description":"部门统计详情","type":"array","items":{"$ref":"#/components/schemas/DepartmentReportStatsDto"}}},"required":["totalReports","totalDepartments","departmentStats"]},"DepartmentReportsStatsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"部门报告统计数据","allOf":[{"$ref":"#/components/schemas/DepartmentReportsStatsDataDto"}]}},"required":["code","data"]},"ApprovalStatusStatsDataDto":{"type":"object","properties":{"totalReports":{"type":"number","description":"总报告数"},"statusStats":{"type":"object","description":"状态统计详情，key 为状态值，value 为包含状态和统计信息的对象","additionalProperties":{"type":"object","properties":{"status":{"enum":["DRAFT","PENDING","IN_REVIEW","APPROVED","REJECTED","RESOLVED","CLOSED"]},"count":{"type":"number"},"percentage":{"type":"number"}}}},"severityStats":{"type":"object","description":"漏洞等级统计详情，key 为等级值，value 为包含等级和统计信息的对象","additionalProperties":{"type":"object","properties":{"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"]},"count":{"type":"number"},"percentage":{"type":"number"}}}}},"required":["totalReports","statusStats","severityStats"]},"ApprovalStatusStatsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"审批状态统计数据","allOf":[{"$ref":"#/components/schemas/ApprovalStatusStatsDataDto"}]}},"required":["code","data"]},"DailyReportStatsDto":{"type":"object","properties":{"date":{"type":"string","description":"日期","example":"2024-01-15"},"submittedCount":{"type":"number","description":"当日提交报告数量","example":12},"reviewedCount":{"type":"number","description":"当日审核报告数量","example":8}},"required":["date","submittedCount","reviewedCount"]},"DailyReportsStatsDataDto":{"type":"object","properties":{"totalDays":{"type":"number","description":"统计天数","example":30},"totalSubmitted":{"type":"number","description":"统计时间范围内的总提交数","example":156},"totalReviewed":{"type":"number","description":"统计时间范围内的总审核数","example":142},"dailyStats":{"description":"每日统计详情","type":"array","items":{"$ref":"#/components/schemas/DailyReportStatsDto"}}},"required":["totalDays","totalSubmitted","totalReviewed","dailyStats"]},"DailyReportsStatsResponseDto":{"type":"object","properties":{"code":{"type":"number","description":"状态码","example":10000},"message":{"type":"string","description":"消息","example":"操作成功"},"data":{"description":"每日报告统计数据","allOf":[{"$ref":"#/components/schemas/DailyReportsStatsDataDto"}]}},"required":["code","data"]},"UpdateBugReportDto":{"type":"object","properties":{"title":{"type":"string","maxLength":200,"description":"报告标题"},"severity":{"enum":["INFO","LOW","MEDIUM","HIGH","CRITICAL"],"type":"string","description":"漏洞等级","example":"HIGH"},"attackMethod":{"type":"string","maxLength":100,"description":"攻击方式","example":"SQL注入"},"description":{"type":"string","description":"详细问题描述（支持 HTML 格式的富文本）","example":"<p>在登录页面发现SQL注入漏洞...</p>"},"discoveredUrls":{"description":"发现漏洞的URL列表","example":["https://example.com/login","https://example.com/admin"],"type":"array","items":{"type":"string","format":"uri"}},"attachmentIds":{"description":"附件ID列表（来自文件上传接口的临时文件ID）","example":["file-id-1","file-id-2"],"type":"array","items":{"type":"string"}}}}}}}