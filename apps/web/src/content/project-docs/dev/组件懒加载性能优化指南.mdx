# React ç»„ä»¶æ‡’åŠ è½½æ€§èƒ½ä¼˜åŒ–æŒ‡å—

## æ¦‚è¿°

æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰æ˜¯ä¸€ç§é‡è¦çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡æŒ‰éœ€åŠ è½½ç»„ä»¶æ¥å‡å°‘åˆå§‹ JavaScript bundle å¤§å°ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚æœ¬æŒ‡å—æä¾›äº†åœ¨ Next.js é¡¹ç›®ä¸­å®æ–½ç»„ä»¶æ‡’åŠ è½½çš„å®Œæ•´æ–¹æ¡ˆå’Œæœ€ä½³å®è·µã€‚

### é€‚ç”¨åœºæ™¯

- å¤§å‹ React åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–
- åŒ…å«å¤§é‡ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç»„ä»¶
- ç”¨æˆ·äº¤äº’è§¦å‘çš„åŠŸèƒ½ç»„ä»¶
- æ¨¡æ€æ¡†ã€ä¾§è¾¹æ ã€å›¾è¡¨ç­‰éé¦–å±å¿…éœ€ç»„ä»¶

## å®ç°æ–¹æ¡ˆ

### æŠ€æœ¯æ ˆ

- **Next.js Dynamic Import**: ç”¨äºç»„ä»¶çš„åŠ¨æ€å¯¼å…¥
- **React Suspense**: å¤„ç†åŠ è½½çŠ¶æ€
- **è‡ªå®šä¹‰ Hook**: ç®¡ç†é¢„åŠ è½½é€»è¾‘

### æ ¸å¿ƒç‰¹æ€§

#### 1. æ‡’åŠ è½½ (Lazy Loading)

- ç»„ä»¶åªæœ‰åœ¨éœ€è¦æ—¶æ‰è¢«åŠ è½½å’Œæ‰§è¡Œ
- æ˜¾è‘—å‡å°‘åˆå§‹ JavaScript bundle å¤§å°
- ç¬¬ä¸‰æ–¹ä¾èµ–åº“è¢«åˆ†ç¦»åˆ°ç‹¬ç«‹çš„ chunk
- æå‡é¦–å±åŠ è½½æ€§èƒ½å’Œ Core Web Vitals æŒ‡æ ‡

#### 2. é¢„åŠ è½½ (Preloading)

- åŸºäºç”¨æˆ·è¡Œä¸ºæ™ºèƒ½é¢„åŠ è½½ç»„ä»¶
- æ”¯æŒæ‚¬åœã€è§†å£ã€æ—¶é—´ç­‰å¤šç§é¢„åŠ è½½ç­–ç•¥
- å¯é…ç½®å»¶è¿Ÿæ—¶é—´é¿å…æ„å¤–è§¦å‘
- é¢„åŠ è½½åç”¨æˆ·äº¤äº’æ—¶å‡ ä¹ç¬é—´å“åº”

#### 3. åŠ è½½çŠ¶æ€ç®¡ç†

- ä¼˜é›…çš„éª¨æ¶å±æˆ–åŠ è½½æŒ‡ç¤ºå™¨
- ä¸å®é™…ç»„ä»¶å¸ƒå±€ä¿æŒä¸€è‡´çš„è§†è§‰æ•ˆæœ
- é”™è¯¯è¾¹ç•Œå¤„ç†åŠ è½½å¤±è´¥æƒ…å†µ
- æ”¯æŒè‡ªå®šä¹‰åŠ è½½å’Œé”™è¯¯çŠ¶æ€

#### 4. å¼€å‘è°ƒè¯•å·¥å…·

- å¼€å‘ç¯å¢ƒä¸‹çš„æ‡’åŠ è½½ç›‘æ§å™¨
- æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„åŠ è½½æ—¶é—´å’ŒçŠ¶æ€
- å¯è§†åŒ–çš„åŠ è½½æŒ‡ç¤ºå™¨å’Œæ€§èƒ½æŒ‡æ ‡
- Bundle åˆ†æå’Œä¼˜åŒ–å»ºè®®

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ lazy/                        # æ‡’åŠ è½½ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ LazyComponent.tsx        # éœ€è¦æ‡’åŠ è½½çš„ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ComponentSkeleton.tsx    # å¯¹åº”çš„åŠ è½½éª¨æ¶å±
â”‚   â”œâ”€â”€ dev/
â”‚   â”‚   â””â”€â”€ LazyLoadMonitor.tsx      # å¼€å‘è°ƒè¯•ç»„ä»¶
â”‚   â””â”€â”€ ParentComponent.tsx          # ä½¿ç”¨æ‡’åŠ è½½çš„çˆ¶ç»„ä»¶
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useLazyComponent.ts          # æ‡’åŠ è½½è‡ªå®šä¹‰ Hook
â””â”€â”€ docs/
    â””â”€â”€ lazy-loading-optimization.md # æœ¬æ–‡æ¡£
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```typescript
import dynamic from 'next/dynamic'
import { ComponentSkeleton } from '~/components/lazy/ComponentSkeleton'

// åŸºç¡€æ‡’åŠ è½½
const LazyComponent = dynamic(
  () => import('~/components/lazy/LazyComponent'),
  {
    loading: () => <ComponentSkeleton />,
    ssr: false, // ç¦ç”¨ SSRï¼ˆé€‚ç”¨äºäº¤äº’å¼ç»„ä»¶ï¼‰
  }
)

// å‘½åå¯¼å‡ºçš„ç»„ä»¶
const LazyNamedComponent = dynamic(
  () => import('~/components/lazy/LazyComponent').then(mod => ({ default: mod.NamedComponent })),
  {
    loading: () => <ComponentSkeleton />,
    ssr: false,
  }
)
```

### é¢„åŠ è½½åŠŸèƒ½

```typescript
import { useLazyComponent } from '~/hooks/useLazyComponent'

const preloadComponent = () => import('~/components/lazy/LazyComponent')

function ParentComponent() {
  const { preload } = useLazyComponent(preloadComponent, {
    preloadDelay: 100, // 100ms å»¶è¿Ÿ
  })

  return (
    <div onMouseEnter={preload}>
      <TriggerButton />
    </div>
  )
}
```

### å®é™…åº”ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1: AI é—®ç­”é¢æ¿ï¼ˆæœ¬é¡¹ç›®å®é™…æ¡ˆä¾‹ï¼‰

```typescript
// SearchForm.tsx
import dynamic from 'next/dynamic'
import { AnswerPanelSkeleton } from '~/components/answer/AnswerPanelSkeleton'
import { useLazyComponent } from '~/hooks/useLazyComponent'

const preloadAnswerPanel = () => import('~/components/answer/AnswerPanel')

const AnswerPanel = dynamic(
  () => preloadAnswerPanel().then(mod => ({ default: mod.AnswerPanel })),
  {
    loading: () => <AnswerPanelSkeleton />,
    ssr: false,
  }
)

export function SearchForm() {
  const [answerOpen, setAnswerOpen] = useState(false)
  const { preload } = useLazyComponent(preloadAnswerPanel, { preloadDelay: 100 })

  return (
    <div>
      <div onMouseEnter={preload}>
        <AnswerTrigger onTriggerOpen={() => setAnswerOpen(true)} />
      </div>

      {answerOpen && (
        <div className="fixed inset-y-0 right-0 w-96">
          <AnswerPanel onClose={() => setAnswerOpen(false)} />
        </div>
      )}
    </div>
  )
}
```

#### ç¤ºä¾‹ 2: å›¾è¡¨ç»„ä»¶

```typescript
// Dashboard.tsx
import dynamic from 'next/dynamic'

const ChartComponent = dynamic(
  () => import('~/components/charts/AdvancedChart'),
  {
    loading: () => <div className="h-64 bg-gray-100 animate-pulse rounded" />,
    ssr: false, // å›¾è¡¨é€šå¸¸éœ€è¦å®¢æˆ·ç«¯æ¸²æŸ“
  }
)

export function Dashboard() {
  const [showChart, setShowChart] = useState(false)

  return (
    <div>
      <button onClick={() => setShowChart(true)}>
        æ˜¾ç¤ºå›¾è¡¨
      </button>

      {showChart && <ChartComponent data={chartData} />}
    </div>
  )
}
```

#### ç¤ºä¾‹ 3: æ¨¡æ€æ¡†ç»„ä»¶

```typescript
// ProductList.tsx
import dynamic from 'next/dynamic'
import { useLazyComponent } from '~/hooks/useLazyComponent'

const preloadModal = () => import('~/components/modals/ProductModal')

const ProductModal = dynamic(() => preloadModal(), {
  loading: () => (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center">
      <div className="bg-white p-6 rounded-lg animate-pulse">
        <div className="h-4 bg-gray-200 rounded w-3/4 mb-4"></div>
        <div className="h-4 bg-gray-200 rounded w-1/2"></div>
      </div>
    </div>
  ),
})

export function ProductList() {
  const [selectedProduct, setSelectedProduct] = useState(null)
  const { preload } = useLazyComponent(preloadModal)

  return (
    <div>
      {products.map(product => (
        <div
          key={product.id}
          onMouseEnter={preload} // æ‚¬åœæ—¶é¢„åŠ è½½æ¨¡æ€æ¡†
          onClick={() => setSelectedProduct(product)}
        >
          {product.name}
        </div>
      ))}

      {selectedProduct && (
        <ProductModal
          product={selectedProduct}
          onClose={() => setSelectedProduct(null)}
        />
      )}
    </div>
  )
}
```

## æ€§èƒ½æŒ‡æ ‡

### ä¼˜åŒ–å‰

- åˆå§‹ bundle åŒ…å«æ‰€æœ‰ç»„ä»¶åŠå…¶ä¾èµ–
- é¦–å±åŠ è½½æ—¶é—´è¾ƒé•¿ï¼ŒJavaScript è§£ææ—¶é—´é•¿
- å†…å­˜å ç”¨è¾ƒé«˜ï¼ŒåŒ…å«æœªä½¿ç”¨çš„ä»£ç 
- Core Web Vitals æŒ‡æ ‡è¾ƒå·®

### ä¼˜åŒ–å

- åˆå§‹ bundle å¤§å°æ˜¾è‘—å‡å°‘ï¼ˆé€šå¸¸å‡å°‘ 20-50%ï¼‰
- é¦–å±åŠ è½½æ—¶é—´æå‡ 15-40%
- æŒ‰éœ€åŠ è½½ï¼Œå†…å­˜ä½¿ç”¨æ›´é«˜æ•ˆ
- é¢„åŠ è½½ç¡®ä¿è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
- æ”¹å–„ LCPã€FIDã€CLS ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡

### å…¸å‹æ€§èƒ½æå‡æ•°æ®

| æŒ‡æ ‡                | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
| ------------------- | ------ | ------ | -------- |
| åˆå§‹ Bundle å¤§å°    | 500KB  | 350KB  | -30%     |
| é¦–å±åŠ è½½æ—¶é—´ (FCP)  | 2.1s   | 1.5s   | -28%     |
| JavaScript è§£ææ—¶é—´ | 180ms  | 120ms  | -33%     |
| å†…å­˜å ç”¨            | 45MB   | 32MB   | -29%     |
| ç”¨æˆ·äº¤äº’å»¶è¿Ÿ        | 150ms  | 50ms   | -67%     |

## æµ‹è¯•æ–¹æ³•

### 1. å¼€å‘ç¯å¢ƒæµ‹è¯•

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

   ```bash
   npm run dev
   ```

2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ Network é¢æ¿

3. è®¿é—®åº”ç”¨é¡µé¢ï¼Œè§‚å¯Ÿåˆå§‹åŠ è½½çš„æ–‡ä»¶

4. è§¦å‘æ‡’åŠ è½½ç»„ä»¶ï¼ˆç‚¹å‡»ã€æ‚¬åœç­‰ï¼‰ï¼Œè§‚å¯ŸåŠ¨æ€åŠ è½½çš„ chunk

5. æŸ¥çœ‹æ§åˆ¶å°çš„æ‡’åŠ è½½æ—¥å¿—å’Œæ€§èƒ½æŒ‡æ ‡

6. ä½¿ç”¨ React DevTools æ£€æŸ¥ç»„ä»¶åŠ è½½çŠ¶æ€

### 2. ç”Ÿäº§ç¯å¢ƒæµ‹è¯•

1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼š

   ```bash
   npm run build
   ```

2. åˆ†æ bundle å¤§å°ï¼š

   ```bash
   # Next.js å†…ç½®åˆ†æå™¨
   npx @next/bundle-analyzer

   # æˆ–ä½¿ç”¨ webpack-bundle-analyzer
   npm install --save-dev webpack-bundle-analyzer
   npx webpack-bundle-analyzer .next/static/chunks/*.js
   ```

3. æ£€æŸ¥æ‡’åŠ è½½ç»„ä»¶ç›¸å…³çš„ chunk æ˜¯å¦è¢«æ­£ç¡®åˆ†ç¦»

4. éªŒè¯é¢„åŠ è½½ç­–ç•¥æ˜¯å¦ç”Ÿæ•ˆ

### 3. æ€§èƒ½æµ‹è¯•

#### ä½¿ç”¨ Chrome DevTools

1. **Performance é¢æ¿**ï¼š

   - è®°å½•é¡µé¢åŠ è½½è¿‡ç¨‹
   - å¯¹æ¯”ä¼˜åŒ–å‰åçš„ JavaScript è§£ææ—¶é—´
   - æµ‹é‡é¦–å±æ¸²æŸ“æ—¶é—´ (FCP)
   - æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ

2. **Network é¢æ¿**ï¼š

   - è§‚å¯Ÿèµ„æºåŠ è½½æ—¶åº
   - æ£€æŸ¥ chunk åˆ†ç¦»æ•ˆæœ
   - éªŒè¯é¢„åŠ è½½è¡Œä¸º

3. **Lighthouse å®¡è®¡**ï¼š
   - è¿è¡Œæ€§èƒ½å®¡è®¡
   - å¯¹æ¯” Core Web Vitals æŒ‡æ ‡
   - è·å–ä¼˜åŒ–å»ºè®®

#### ä½¿ç”¨æ€§èƒ½æµ‹è¯•å·¥å…·

```bash
# ä½¿ç”¨ Lighthouse CLI
npm install -g lighthouse
lighthouse https://your-app.com --output html --output-path ./lighthouse-report.html

# ä½¿ç”¨ WebPageTest
# è®¿é—® https://www.webpagetest.org/ è¿›è¡Œåœ¨çº¿æµ‹è¯•
```

### 4. è‡ªåŠ¨åŒ–æµ‹è¯•

```javascript
// performance.test.js
import { performance } from 'perf_hooks'

describe('Lazy Loading Performance', () => {
  test('should reduce initial bundle size', async () => {
    const initialBundleSize = await getBundleSize('initial')
    const expectedMaxSize = 500 * 1024 // 500KB

    expect(initialBundleSize).toBeLessThan(expectedMaxSize)
  })

  test('should load component within acceptable time', async () => {
    const startTime = performance.now()

    // è§¦å‘æ‡’åŠ è½½
    await triggerLazyLoad()

    const loadTime = performance.now() - startTime
    expect(loadTime).toBeLessThan(200) // 200ms å†…åŠ è½½å®Œæˆ
  })
})
```

## æœ€ä½³å®è·µ

### 1. ä½•æ—¶ä½¿ç”¨æ‡’åŠ è½½

âœ… **é€‚åˆæ‡’åŠ è½½çš„ç»„ä»¶ï¼š**

- å¤§å‹åŠŸèƒ½ç»„ä»¶ï¼ˆå¦‚ AI é—®ç­”é¢æ¿ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
- åŒ…å«å¤§é‡ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç»„ä»¶ï¼ˆå›¾è¡¨åº“ã€åœ°å›¾ç»„ä»¶ï¼‰
- ç”¨æˆ·ä¸ä¸€å®šä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼ˆé«˜çº§è®¾ç½®ã€ç®¡ç†é¢æ¿ï¼‰
- æ¨¡æ€æ¡†ã€ä¾§è¾¹æ ã€æŠ½å±‰ç­‰äº¤äº’ç»„ä»¶
- è·¯ç”±çº§åˆ«çš„é¡µé¢ç»„ä»¶
- æ¡ä»¶æ¸²æŸ“çš„å¤æ‚ç»„ä»¶

âŒ **ä¸é€‚åˆæ‡’åŠ è½½çš„ç»„ä»¶ï¼š**

- é¦–å±å¿…éœ€çš„ç»„ä»¶ï¼ˆå¯¼èˆªæ ã€é¡µé¢å¸ƒå±€ï¼‰
- å°å‹ã€è½»é‡çº§ç»„ä»¶ï¼ˆæŒ‰é’®ã€å›¾æ ‡ï¼‰
- é¢‘ç¹ä½¿ç”¨çš„åŸºç¡€ç»„ä»¶ï¼ˆè¾“å…¥æ¡†ã€æ–‡æœ¬ï¼‰
- å…³é”®è·¯å¾„ä¸Šçš„ç»„ä»¶ï¼ˆç™»å½•è¡¨å•ã€æ”¯ä»˜ç»„ä»¶ï¼‰
- ä½“ç§¯å°äº 10KB çš„ç»„ä»¶

### 2. é¢„åŠ è½½ç­–ç•¥

- **æ‚¬åœé¢„åŠ è½½**: é€‚åˆæŒ‰é’®ã€é“¾æ¥ç­‰è§¦å‘å™¨ï¼Œç”¨æˆ·æ„å›¾æ˜ç¡®
- **è§†å£é¢„åŠ è½½**: é€‚åˆæ»šåŠ¨è§¦å‘çš„ç»„ä»¶ï¼ŒåŸºäº Intersection Observer
- **æ—¶é—´é¢„åŠ è½½**: é€‚åˆå»¶è¿ŸåŠ è½½çš„éå…³é”®ç»„ä»¶ï¼Œé¡µé¢ç©ºé—²æ—¶åŠ è½½
- **è·¯ç”±é¢„åŠ è½½**: åŸºäºç”¨æˆ·å¯¼èˆªæ¨¡å¼é¢„æµ‹ä¸‹ä¸€ä¸ªé¡µé¢
- **ç”¨æˆ·è¡Œä¸ºé¢„åŠ è½½**: åŸºäºç”¨æˆ·å†å²è¡Œä¸ºå’Œåå¥½è¿›è¡Œé¢„æµ‹

#### é¢„åŠ è½½ç­–ç•¥ç¤ºä¾‹

```typescript
// 1. æ‚¬åœé¢„åŠ è½½
function HoverPreload() {
  const { preload } = useLazyComponent(() => import('./HeavyComponent'))

  return (
    <button onMouseEnter={preload}>
      æ˜¾ç¤ºç»„ä»¶
    </button>
  )
}

// 2. è§†å£é¢„åŠ è½½
function ViewportPreload() {
  const [isVisible, setIsVisible] = useState(false)
  const { preload } = useLazyComponent(() => import('./ScrollComponent'))

  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) {
        preload()
        setIsVisible(true)
      }
    })

    observer.observe(triggerRef.current)
    return () => observer.disconnect()
  }, [preload])

  return <div ref={triggerRef}>{isVisible && <LazyComponent />}</div>
}

// 3. ç©ºé—²æ—¶é—´é¢„åŠ è½½
function IdlePreload() {
  const { preload } = useLazyComponent(() => import('./NonCriticalComponent'))

  useEffect(() => {
    if ('requestIdleCallback' in window) {
      requestIdleCallback(() => preload())
    } else {
      setTimeout(preload, 2000) // é™çº§æ–¹æ¡ˆ
    }
  }, [preload])
}
```

### 3. é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥

```typescript
// åŸºç¡€é”™è¯¯å¤„ç†
const LazyComponent = dynamic(
  () => import('./Component').catch(() => {
    // åŠ è½½å¤±è´¥æ—¶çš„é™çº§å¤„ç†
    console.error('Failed to load component')
    return { default: () => <div>ç»„ä»¶åŠ è½½å¤±è´¥</div> }
  }),
  {
    loading: () => <Skeleton />,
    ssr: false,
  }
)

// ä½¿ç”¨ ErrorBoundary åŒ…è£…
<ErrorBoundary
  fallback={<ErrorFallback />}
  onError={(error) => {
    // é”™è¯¯ä¸ŠæŠ¥
    console.error('Lazy component error:', error)
  }}
>
  <LazyComponent />
</ErrorBoundary>

// é«˜çº§é”™è¯¯å¤„ç† Hook
function useRobustLazyComponent(importFn, options = {}) {
  const [error, setError] = useState(null)
  const [retryCount, setRetryCount] = useState(0)
  const maxRetries = options.maxRetries || 3

  const robustImport = useCallback(async () => {
    try {
      return await importFn()
    } catch (err) {
      if (retryCount < maxRetries) {
        setRetryCount(prev => prev + 1)
        // æŒ‡æ•°é€€é¿é‡è¯•
        await new Promise(resolve =>
          setTimeout(resolve, Math.pow(2, retryCount) * 1000)
        )
        return robustImport()
      } else {
        setError(err)
        throw err
      }
    }
  }, [importFn, retryCount, maxRetries])

  return { robustImport, error, retryCount }
}
```

### 4. æ€§èƒ½ç›‘æ§å’Œåˆ†æ

```typescript
// æ€§èƒ½ç›‘æ§ Hook
function useLazyLoadPerformance(componentName) {
  useEffect(() => {
    const startTime = performance.now()

    return () => {
      const loadTime = performance.now() - startTime

      // å‘é€æ€§èƒ½æ•°æ®
      if ('sendBeacon' in navigator) {
        navigator.sendBeacon('/api/performance', JSON.stringify({
          component: componentName,
          loadTime,
          timestamp: Date.now()
        }))
      }
    }
  }, [componentName])
}

// ä½¿ç”¨ç¤ºä¾‹
function LazyComponentWithMonitoring() {
  useLazyLoadPerformance('HeavyComponent')

  return <LazyComponent />
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç»„ä»¶åŠ è½½å¤±è´¥**

   - æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å‡º

2. **é¢„åŠ è½½ä¸å·¥ä½œ**

   - æ£€æŸ¥äº‹ä»¶ç»‘å®šæ˜¯å¦æ­£ç¡®
   - ç¡®è®¤é¢„åŠ è½½å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨

3. **ç±»å‹é”™è¯¯**
   - ç¡®ä¿åŠ¨æ€å¯¼å…¥çš„ç±»å‹å®šä¹‰æ­£ç¡®
   - æ£€æŸ¥ TypeScript é…ç½®

### è°ƒè¯•æŠ€å·§

1. ä½¿ç”¨ `LazyLoadMonitor` ç»„ä»¶ç›‘æ§åŠ è½½çŠ¶æ€
2. åœ¨æµè§ˆå™¨ Network é¢æ¿è§‚å¯Ÿæ–‡ä»¶åŠ è½½
3. ä½¿ç”¨ React DevTools æ£€æŸ¥ç»„ä»¶çŠ¶æ€
4. æŸ¥çœ‹æ§åˆ¶å°çš„æ‡’åŠ è½½æ—¥å¿—

## é«˜çº§ä¼˜åŒ–æŠ€å·§

### 1. ç»„ä»¶çº§åˆ«çš„ä»£ç åˆ†å‰²

```typescript
// æŒ‰åŠŸèƒ½æ¨¡å—åˆ†å‰²
const AdminPanel = dynamic(() => import('./admin/AdminPanel'))
const UserDashboard = dynamic(() => import('./user/UserDashboard'))

// æŒ‰è·¯ç”±åˆ†å‰²
const routes = [
  {
    path: '/admin',
    component: dynamic(() => import('./pages/AdminPage')),
  },
  {
    path: '/dashboard',
    component: dynamic(() => import('./pages/DashboardPage')),
  },
]
```

### 2. ç¬¬ä¸‰æ–¹åº“çš„æ‡’åŠ è½½

```typescript
// å›¾è¡¨åº“æ‡’åŠ è½½
const Chart = dynamic(() => import('react-chartjs-2'), {
  loading: () => <div>åŠ è½½å›¾è¡¨ä¸­...</div>
})

// å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ‡’åŠ è½½
const RichEditor = dynamic(() => import('@tinymce/tinymce-react'), {
  ssr: false,
  loading: () => <div>åŠ è½½ç¼–è¾‘å™¨ä¸­...</div>
})
```

### 3. æ¡ä»¶æ‡’åŠ è½½

```typescript
function ConditionalLazyLoad({ userRole }) {
  // åªæœ‰ç®¡ç†å‘˜æ‰åŠ è½½ç®¡ç†é¢æ¿
  const AdminComponent = useMemo(() => {
    if (userRole === 'admin') {
      return dynamic(() => import('./AdminComponent'))
    }
    return null
  }, [userRole])

  return AdminComponent ? <AdminComponent /> : null
}
```

## æœªæ¥å‘å±•æ–¹å‘

1. **æ›´ç»†ç²’åº¦çš„æ‡’åŠ è½½**: å¯¹å­ç»„ä»¶å’ŒåŠŸèƒ½æ¨¡å—å®æ–½æ‡’åŠ è½½
2. **AI é©±åŠ¨çš„æ™ºèƒ½é¢„åŠ è½½**: åŸºäºæœºå™¨å­¦ä¹ é¢„æµ‹ç”¨æˆ·è¡Œä¸º
3. **è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–**: åˆ©ç”¨ CDN å’Œè¾¹ç¼˜èŠ‚ç‚¹ä¼˜åŒ–åŠ è½½é€Ÿåº¦
4. **æ¸è¿›å¼ Web åº”ç”¨**: ç»“åˆ Service Worker å®ç°ç¦»çº¿ç¼“å­˜
5. **å¾®å‰ç«¯æ¶æ„**: åœ¨å¾®å‰ç«¯åœºæ™¯ä¸‹çš„æ‡’åŠ è½½ç­–ç•¥
6. **å®æ—¶æ€§èƒ½ç›‘æ§**: å»ºç«‹å®Œå–„çš„æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

## ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Next.js Dynamic Imports](https://nextjs.org/docs/advanced-features/dynamic-import)
- [React.lazy](https://react.dev/reference/react/lazy)
- [React Suspense](https://react.dev/reference/react/Suspense)
- [Webpack Code Splitting](https://webpack.js.org/guides/code-splitting/)

### æ€§èƒ½ä¼˜åŒ–

- [Web Performance Best Practices](https://web.dev/performance/)
- [Core Web Vitals](https://web.dev/vitals/)
- [JavaScript Performance](https://developers.google.com/web/fundamentals/performance/optimizing-javascript)
- [Bundle Analysis Tools](https://nextjs.org/docs/advanced-features/analyzing-bundles)

### å·¥å…·å’Œåº“

- [React Loadable](https://github.com/jamiebuilds/react-loadable)
- [Loadable Components](https://loadable-components.com/)
- [Bundle Analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer)
- [Lighthouse](https://developers.google.com/web/tools/lighthouse)

### æœ€ä½³å®è·µ

- [React Performance Patterns](https://kentcdodds.com/blog/react-performance-patterns)
- [Code Splitting Strategies](https://web.dev/reduce-javascript-payloads-with-code-splitting/)
- [Lazy Loading Best Practices](https://web.dev/lazy-loading-best-practices/)

---

> ğŸ’¡ **æç¤º**: æ‡’åŠ è½½æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œä½†éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯åˆç†ä½¿ç”¨ã€‚è¿‡åº¦çš„æ‡’åŠ è½½å¯èƒ½ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œå»ºè®®åœ¨å®æ–½å‰è¿›è¡Œå……åˆ†çš„æ€§èƒ½æµ‹è¯•å’Œç”¨æˆ·ä½“éªŒè¯„ä¼°ã€‚
