# 异步提供者（Async Provider）

在某些场景下，应用启动前需要等待一个或多个**异步任务**完成。例如，你可能希望在与数据库建立连接之前，不开始接收请求。此时，可以通过异步提供者实现这一需求。

实现方式是结合 `useFactory` 语法与 `async/await`。工厂函数返回一个 `Promise`，并可在函数内部 `await` 异步任务。Nest 会在实例化依赖（注入）该提供者的任何类之前，等待该 Promise 被解析。

```ts
{
  provide: 'ASYNC_CONNECTION',
  useFactory: async () => {
    const connection = await createConnection(options);
    return connection;
  },
}
```

<CalloutInfo>
  <div>你可以在[这里](/fundamentals/custom-providers)了解更多自定义提供者的用法。</div>
</CalloutInfo>

## 注入方式

异步提供者与其他提供者一样，通过其注入令牌（Injection Token）注入到其他组件。在上面的示例中，可以使用 `@Inject('ASYNC_CONNECTION')` 进行注入。

## 示例

[TypeORM 实践](/recipes/sql-typeorm)中有更完整的异步提供者示例。
